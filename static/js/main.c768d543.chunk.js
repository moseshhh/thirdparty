(this.webpackJsonpthird_party=this.webpackJsonpthird_party||[]).push([[0],{207:function(e,t,a){e.exports=a(374)},212:function(e,t,a){},373:function(e,t,a){},374:function(e,t,a){"use strict";a.r(t);var n,r=a(0),i=a.n(r),l=a(19),o=a.n(l),s=(a(212),a(33)),c=a(387),u=a(44),m=a(386),d=a(391),p=a(153),f=a(114),y=a(115),v=a(135),h=a(131),g=n=i.a.createContext(),b=g.Provider,w=(g.Consumer,function(e){Object(v.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={dfrsFormData:{}},e.f_setDfrsFormData=function(t){e.setState({dfrsFormData:t})},e}return Object(y.a)(a,[{key:"render",value:function(){return i.a.createElement(b,{value:Object(p.a)(Object(p.a)({},this.state),{},{f_setDfrsFormData:this.f_setDfrsFormData})},this.props.children)}}]),a}(i.a.Component)),E=a(383),k=a(132),D=a(377),S=a(381),P=a(101),M=a(378),O=a(35),j=a.n(O),_={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},I={xs:{span:24,offset:0},sm:{span:16,offset:8}},C=function(e){var t=Object(r.useState)(!0),a=Object(s.a)(t,2),n=a[0],l=a[1],o=Object(r.useState)(!0),c=Object(s.a)(o,2),m=c[0],d=c[1],p=Object(r.useState)("todate"),f=Object(s.a)(p,2),y=f[0],v=f[1];var h=e.timesRange;return i.a.createElement(E.a,Object.assign({name:"deforestation_control"},_,{onFinish:function(t){return e.onFinish(t,y)}}),i.a.createElement(k.a.Group,{onChange:function(e){v(e.target.value),"period"==e.target.value?(d(!1),l(!0)):"range-picker"==e.target.value?(d(!0),l(!1)):("all"==e.target.value||"todate"==e.target.value)&&(d(!0),l(!0))},value:y},i.a.createElement(k.a,{value:"todate"},"To Date"),i.a.createElement(k.a,{value:"range-picker"},"Time Range"),i.a.createElement(k.a,{value:"period"},"Time Period"),i.a.createElement(k.a,{value:"all"},"Select All")),i.a.createElement(D.a,null),i.a.createElement(E.a.Item,{name:"range-picker",label:"Time Range"},i.a.createElement(S.a.RangePicker,{format:"YYYY/MM/DD",disabled:n})),i.a.createElement(D.a,null,"Or"),i.a.createElement(E.a.Item,{name:"period-time",label:"Period Time"},i.a.createElement(P.a,{placeholder:"select time period",disabled:m},h.map((function(e,t){var a=Object(s.a)(e,2),n=a[0],r=a[1];return i.a.createElement(P.a.Option,{key:t,value:"".concat(j()(n).format("YYYY-MM-DD"),"|").concat(j()(r).format("YYYY-MM-DD"))},j()(n).format("MMM Do YYYY")," - ",j()(r).format("MMM Do YYYY"))})))),i.a.createElement(E.a.Item,{wrapperCol:I},i.a.createElement(M.a,null,i.a.createElement(u.a,{type:"primary",htmlType:"submit",id:"button-form-deforestation"},"Submit"),i.a.createElement(u.a,{type:"primary",onClick:e.onClear},"Clear"))))},x=function(e){var t=Object(r.useState)(!1),a=Object(s.a)(t,2),n=a[0],l=a[1];return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"button-notif"},i.a.createElement(c.a,{count:e.count},i.a.createElement(u.a,{type:"primary",shape:"circle",size:"large",id:"buttonNotif",onClick:e.onClick},i.a.createElement(d.a,null)))),i.a.createElement(m.a,{title:"Deforestation",placement:"right",closable:!0,onClose:function(){l(!1)},visible:n,width:500}))},R=a(83),F=a(379),L=a(392),Y=a(393),A=(R.a.SubMenu,function(e){var t=Object(r.useState)(!0),a=Object(s.a)(t,2),n=a[0];a[1];return i.a.createElement(F.a.Sider,{collapsed:n},i.a.createElement("div",{className:"logo"}),i.a.createElement(R.a,{theme:"dark",defaultSelectedKeys:["1"],mode:"inline"},i.a.createElement(R.a.Item,{key:"1",icon:i.a.createElement(L.a,null)},"Maps"),i.a.createElement(R.a.Item,{key:"9",icon:i.a.createElement(Y.a,null)})))}),N=a(129),T=a(388),G=a(380),z=a(93),H=a(56),q=a(384),B=a(390),K=a(103),V=a(389),W=a(68),X=a(195),J=a(385),Q=a(394),U=function(e){var t=Object(r.useState)(!1),a=Object(s.a)(t,2),n=a[0],l=a[1];return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"button-clear"},i.a.createElement(c.a,{count:e.count},i.a.createElement(u.a,{type:"primary",shape:"circle",size:"large",id:"buttonClear",onClick:e.onClick},i.a.createElement(Q.a,null)))),i.a.createElement(m.a,{title:"Deforestation",placement:"right",closable:!0,onClose:function(){l(!1)},visible:n,width:500}))},Z=a(395),$=function(e){return i.a.createElement("div",{className:e.className},i.a.createElement(u.a,{type:"primary",shape:"circle",size:"large",id:"buttonClear",onClick:e.onClick,danger:!0},i.a.createElement(Z.a,null)))},ee=a(382),te=function(e){return i.a.createElement(ee.a,{type:"inner",title:"Deforestation ".concat(e.index),extra:i.a.createElement(u.a,{type:"dashed",onClick:e.zoomTo},"Zoom to")},i.a.createElement(T.a,{size:"small",layout:"vertical"},i.a.createElement(T.a.Item,{label:"Latitude"},e.lat),i.a.createElement(T.a.Item,{label:"Longitude"},e.lon),i.a.createElement(T.a.Item,{label:"Start Date"},j()(new Date(e.startdate)).format("yyyy/MM/DD")),i.a.createElement(T.a.Item,{label:"End Date"},j()(new Date(e.enddate)).format("yyyy/MM/DD")),i.a.createElement(T.a.Item,{label:"Peatland"},e.peatland," ha"),i.a.createElement(T.a.Item,{label:"Mangrove"},e.mangrove," ha"),i.a.createElement(T.a.Item,{label:"Other"},e.other," ha"),i.a.createElement(T.a.Item,{label:"Total"},e.total," ha")))},ae=a(204),ne=a(187),re=function(e){var t=Object(r.useState)([]),a=Object(s.a)(t,2),n=a[0],l=a[1],o=Object(r.useState)([]),c=Object(s.a)(o,2),m=c[0],d=c[1],p=Object(r.useState)([]),f=Object(s.a)(p,2),y=f[0],v=f[1],h=Object(r.useState)([]),g=Object(s.a)(h,2),b=g[0],w=g[1],E={latitude:e.location.latitude,longitude:e.location.longitude};Object(r.useEffect)((function(){Object(N.loadModules)(["esri/geometry/geometryEngine","esri/geometry/projection","esri/geometry/SpatialReference"]).then((function(t){var a=Object(s.a)(t,3),n=a[0],r=a[1],i=a[2],o=Object(s.a)(e.data,4),c=o[0],u=o[1],m=o[2],p=o[3];console.log("hs",p);var f=c.map((function(e,t){var a={latitude:e.geometry.latitude,longitude:e.geometry.longitude},n=Object(ne.getDistance)(E,a),r=n>1e3?"warning":"impacted";return{key:t,no:t+1,name:e.attributes.PomName,distance:n/1e3,distanceNumber:n,status:r}}));f.sort((function(e,t){return e.distanceNumber-t.distanceNumber}));var y=p.map((function(e,t){return{key:t,acq_date:e.attributes.Loc_Date,latitude:e.attributes.Latitude,longitude:e.attributes.Longitude,verification:e.attributes.Verificati}}));console.log("dataHotspot",y);var h=u.map((function(t,a){return r.load().then((function(){var l=new i({wkid:3857}),o=r.project(e.dfrsArea,l),s=r.project(t.geometry,l),c=n.distance(o,s),u=c<1e3?"impacted":"warning";return{key:a,no:a+1,name:t.attributes.Name,area:10,distance:(c/1e3).toFixed(2),status:u}}))})),g=m.map((function(t,a){return console.log("el",t),r.load().then((function(){var l=new i({wkid:3857}),o=r.project(e.dfrsArea,l),s=r.project(t.geometry,l),c=n.distance(o,s),u=c<1e3?"impacted":"warning";return{remark:t.attributes.Category,area:t.attributes["SHAPE.STArea()"],key:a,status:u,distance:(c/1e3).toFixed(2)}}))}));Promise.all(h).then((function(e){return d(e)})),Promise.all(g).then((function(e){return v(e)})),l(f),w(y)}))}),[]);var k=[{title:"Pom Name",dataIndex:"name",key:"name",span:10,sorter:function(e,t){return e.name.localeCompare(t.name)},sortDirections:["ascend"]},{title:"Distance (estimation) in Km",dataIndex:"distance",key:"distance",span:10,sorter:function(e,t){return e.distance-t.distance}},{title:"Status",dataIndex:"status",key:"status",span:10,render:function(e){var t="warning"==e?"yellow":"red";return i.a.createElement(ae.a,{color:t,key:e},e)}},{title:"Action",dataIndex:"action",key:"action",span:10}],S=[{title:"Concession",dataIndex:"name",key:"name",span:10},{title:"Distance in Km (Estimation)",dataIndex:"distance",key:"distance",span:10,sorter:function(e,t){return e.distance-t.distance}},{title:"Status",dataIndex:"status",key:"status",span:10,render:function(e){var t="warning"==e?"yellow":"red";return i.a.createElement(ae.a,{color:t,key:e},e)}},{title:"Action",dataIndex:"action",key:"action",span:10}];return i.a.createElement("div",{style:{height:"60vh",overflow:"scroll",paddingLeft:"5vw",paddingRight:"5vw"}},i.a.createElement("h2",null,"POM"),i.a.createElement(G.a,{dataSource:n,columns:k}),i.a.createElement(D.a,null),i.a.createElement("h2",null,"Concession"),i.a.createElement(G.a,{dataSource:m,columns:S}),i.a.createElement(D.a,null),i.a.createElement("h2",null,"Peat"),i.a.createElement(G.a,{dataSource:y,columns:[{title:"Remarks",dataIndex:"remark",key:"remark",span:10},{title:"Distance in Km (Estimation)",dataIndex:"distance",key:"distance",span:10,sorter:function(e,t){return e.distance-t.distance}},{title:"Total Area",dataIndex:"area",key:"area",span:10},{title:"Action",dataIndex:"action",key:"action",span:10}]}),i.a.createElement(D.a,null),i.a.createElement("h2",null,"Hotspot"),i.a.createElement(G.a,{dataSource:b,columns:[{title:"Latitude",dataIndex:"latitude",key:"latitude",span:10},{title:"Longitude",dataIndex:"longitude",key:"longitude",span:10},{title:"Acquisition Date",dataIndex:"acq_date",key:"acq_date",span:10},{title:"Verification",dataIndex:"verification",key:"verification",span:10}]}),i.a.createElement(D.a,null),i.a.createElement(u.a,{type:"dashed"},"Export to PDF"),i.a.createElement(D.a,null))},ie="http://10.7.12.21:8000/service/WGService.asmx/",le=function(e){Object(v.a)(a,e);var t=Object(h.a)(a);function a(e,n){var r;return Object(f.a)(this,a),(r=t.call(this,e,n)).f_showDrawer=function(e){r.setState({isDrawerShow:e})},r.f_dfrsFormOnFinish=function(e,t){var a,n;if("range-picker"==t){var i=e["range-picker"][0].format("YYYY-MM-DD"),l=e["range-picker"][1].format("YYYY-MM-DD");a="start_date >= '".concat(i,"' and end_date <= '").concat(l,"'"),n=[i,l]}else if("period"==t){var o=e["period-time"].split("|"),c=Object(s.a)(o,2),u=c[0],m=c[1];a="end_date >= '".concat(u,"' and end_date <= '").concat(m,"'"),n=[u,m]}else if("all"==t)a="",n=[];else if("todate"==t){var d=Object(s.a)(r.f_getDatesRange(j()("20190215"),j()())[0],2),p=d[0],f=d[1];a="end_date >= '".concat(p,"' and end_date <= '").concat(f,"'"),n=[p,f]}r.setState({timeSelection:n});var y=r.layerDeforestationPoint.createQuery();y.where=a,r.layerDeforestationPoint.queryFeatures(y).then((function(e){return r.setState({dfrsResult:e.features})})),r.layerDeforestationPoint.definitionExpression=a,r.layerDeforestationPoint.visible=!0},r.f_zoomTo=function(e,t){console.log(e,t),r.view.center=[t,e],r.view.zoom=13},r.f_fetchTimeDfrs=function(){fetch("https://idjktsvr10.wil.local/arcgis/rest/services/NewGISInteractiveMap/Deforestation/MapServer/0/query?f=json&outFields=[start_date,end_date]&where=1=1&returnGeometry=false").then((function(e){return e.json()})).then((function(e){return r.setState({timedata:e.features})}))},r.f_clearBufferLayers=function(){r.bufferLayer.removeAll()},r.f_onClear=function(){r.setState({dfrsResult:null}),r.layerDeforestationPoint.visible=!1},r.f_hotspot=function(){},r.mapRef=i.a.createRef(),r.state={isDrawerShow:!1,dfrsResult:null,timedata:[],showModal:!1,modalData:[],isLoading:!1,dfrsPointGeom:[],dfrsAreaGeom:null,timeSelection:[]},r.theme={dark:"https://js.arcgis.com/4.16/esri/themes/dark/main.css",light:!0},r.f_fetchTimeDfrs(),r}return Object(y.a)(a,[{key:"f_getDatesRange",value:function(e,t){for(var a=e,n=[];a<=t;){var r=a.format(),i=a.add(13,"days").format();n.push([r,i]),a=a.add(1,"days")}return n.reverse()}},{key:"componentDidMount",value:function(){var e=this;Object(N.loadModules)(["esri/Map","esri/views/MapView","esri/layers/VectorTileLayer","esri/widgets/BasemapGallery","esri/widgets/Expand","esri/widgets/LayerList","esri/layers/FeatureLayer","esri/layers/GroupLayer","esri/Graphic","esri/layers/GraphicsLayer","esri/widgets/Legend","esri/geometry/geometryEngine","esri/core/watchUtils","esri/widgets/DistanceMeasurement2D","esri/tasks/support/Query","esri/widgets/TimeSlider"],{css:this.theme.light}).then((function(t){var a=Object(s.a)(t,16),n=a[0],l=a[1],c=a[2],m=a[3],d=a[4],p=a[5],f=a[6],y=a[7],v=a[8],h=a[9],g=a[10],b=a[11],w=a[12],E=(a[13],a[14]),k=a[15],S=function(t){for(var a=Object(r.useState)(!1),n=Object(s.a)(a,2),l=n[0],o=n[1],c=t.data,m=[],d=0,p=Object.keys(c);d<p.length;d++){var f=p[d];m.push(i.a.createElement(T.a.Item,{label:f,key:f},c[f]))}var y=function(t,a,n,r){var i;"Refinery"===a?(i="".concat(ie,"_GetPOMSupplier_?refinery=").concat(t),e.layerPom.visible=!0):"POM"===a&&(i="".concat(ie,"_GetRefinery_?pom=").concat(t),e.layerRefinery.visible=!0),fetch(i).then((function(e){return e.json()})).then((function(t){var a={type:"simple-line",color:[226,119,40],width:2};t.map((function(t){var i={type:"polyline",paths:[[n,r],[parseFloat(t.X_Coor),parseFloat(t.Y_Coor)]]},l=new v({geometry:i,symbol:a});e.view.graphics.add(l)}))})).then((function(){return o(!0)})).catch((function(e){return console.log("error",e)}))},h=function(){e.view.graphics.removeAll(),e.layerRefinery.visible=!1,o(!1)};return i.a.createElement(i.a.Fragment,null,i.a.createElement(T.a,{title:t.title,style:{fontSize:"12px"},bordered:!0,column:1,size:"small"},m),i.a.createElement(D.a,null),function(){switch(t.title){case"POM":return l?i.a.createElement(u.a,{type:"primary",onClick:h,danger:!0},"Clear"):i.a.createElement(u.a,{type:"primary",onClick:function(){return y(c.pomid,t.title,t.position.longitude,t.position.latitude)}},"Trace");case"Refinery":return 1==l?i.a.createElement(u.a,{type:"primary",onClick:h,danger:!0},"Clear"):i.a.createElement(u.a,{type:"primary",onClick:function(){return y(c.rfid,t.title,t.position.longitude,t.position.latitude)}},"Trace")}}())},P=function(t){console.log("props",t);var a=Object(r.useState)(0),n=Object(s.a)(a,2),l=n[0],o=n[1],c=Object(r.useState)([]),m=Object(s.a)(c,2),d=m[0],p=m[1],f=Object(r.useState)([]),y=Object(s.a)(f,2),v=y[0],h=y[1],g=[{label:"POM",value:e.layerPom,key:"1"},{label:"Reffinery",value:e.layerRefinery,key:"2"},{label:"Concession Area",value:e.layerPlantationArea,key:"3"},{label:"Peatland",value:e.layerPeat,key:"4"}],b=void 0!==e.bufferLayer.graphics.getItemAt(0)&&e.bufferLayer.graphics.getItemAt(0).geometry,w=function(e){e.target.value.visible=e.target.checked,S()},k=function(e){o(e),t.onSliderChange(e),S()},S=function(){g.forEach((function(e,t){var a=e.value;"POM Supplier"==a.title?a.visible?P(a).then((function(e){return p(e.features)})):p([]):"Oil Palm Area"==a.title&&(a.visible?P(a).then((function(e){return h(e.features)})):h([]))}))},P=function(e){console.log("l",e);var t=new E;return t.geometry=b,t.spatialRelationship="intersects",t.returnGeometry=!0,e.queryFeatures(t)},O=function(t,a){console.log("data",t);var n=[{title:"Name",dataIndex:"name",key:"name",render:function(e){return i.a.createElement("a",null,e)}},{title:"Action",dataIndex:"action",key:"action",render:function(t){return i.a.createElement(u.a,{onClick:function(){return function(t){e.view.goTo({target:t,tilt:70})}(t)}},"go to")}}],r={POM:"PomName",Concession:"Name"};if(t.length>0){console.log(t);var l=t.map((function(e){return{name:e.attributes[r[a]],action:e.geometry}}));return i.a.createElement(i.a.Fragment,null,i.a.createElement("h1",null,a),i.a.createElement("div",{style:{padding:"10px"}},i.a.createElement(G.a,{columns:n,dataSource:l,size:"small"})),i.a.createElement(D.a,null))}return null};return i.a.createElement(i.a.Fragment,null,i.a.createElement(D.a,null),i.a.createElement("h4",null,"Buffer Radius in Kilometers"),i.a.createElement("div",null,i.a.createElement(z.a,null,i.a.createElement(H.a,{span:17},i.a.createElement(q.a,{defaultValue:l,max:50,value:"number"===typeof l?l:0,tooltipPlacement:"bottom",onChange:k})),i.a.createElement(H.a,{span:2},i.a.createElement(B.a,{min:0,max:50,style:{margin:"0 16px"},value:l,onChange:k})))),i.a.createElement(D.a,null),i.a.createElement("h4",null,"Show or hide layer"),g.map((function(e){return i.a.createElement(K.a,{key:e.key,value:e.value,onChange:w},e.label)})),i.a.createElement(D.a,null),O(d,"POM"),O(v,"Concession"),i.a.createElement(M.a,null,i.a.createElement(u.a,{type:"primary",onClick:function(){if(b){var a=new E;a.geometry=b,a.spatialRelationship="intersects",a.returnGeometry=!0,a.outFields="*",a.outSpatialReference={wkid:4326};var n=new E;n.outFields="*",n.returnGeometry=!0,n.where="id = '".concat(t.id,"'");var r=new E;r.outFields="*",r.geometry=b,r.returnGeometry=!0,r.spatialRelationship="intersects",r.where="Acq_Date between date'".concat(j()(t.attributes.start_date).format("YYYY-MM-DD"),"' and '").concat(j()(t.attributes.end_date).format("YYYY-MM-DD"),"'"),e.layerDeforestationArea.queryFeatures(n).then((function(t){e.setState({dfrsAreaGeom:t.features[0].geometry})})),e.setState({isLoading:!0}),Promise.all([e.layerPom.queryFeatures(a),e.layerPlantationArea.queryFeatures(a),e.layerPeat.queryFeatures(a),e.layerHotspot.queryFeatures(r)]).then((function(t){var a=t.map((function(e){return e.features}));e.setState({modalData:a})})).then((function(){return e.setState({showModal:!0,isLoading:!1})}))}}},"Show List")))},O=function(t,a){console.log(t,a);var n=document.createElement("div");if("POM"===a)N.content=n,o.a.render(i.a.createElement(S,{data:t.graphic.attributes,title:a,position:{latitude:t.graphic.geometry.latitude,longitude:t.graphic.geometry.longitude}}),n);else if("Deforestation Point"===a){W.content=n;o.a.render(i.a.createElement(P,{id:t.graphic.attributes.id,onSliderChange:function(a){var n=t.graphic.geometry;e.setState({dfrsPointGeom:n}),function(t,a){if(a>0){var n=b.geodesicBuffer(t,a,"kilometers");0===e.bufferLayer.graphics.length?e.bufferLayer.add(new v({geometry:n,symbol:{type:"simple-fill",color:[140,140,222,.5],outline:{color:[0,0,0,.5],width:2}}})):e.bufferLayer.graphics.getItemAt(0).geometry=n}else e.bufferLayer.removeAll()}(n,a)},attributes:t.graphic.attributes}),n)}return n};e.map=new n({basemap:"streets-night-vector"}),e.view=new l({container:e.mapRef.current,map:e.map,center:[118,0],zoom:4,popup:{dockEnabled:!0,dockOptions:{buttonEnabled:!1,breakpoint:!1,position:"top-center"}}}),e.layerPlantationPoint=new f({url:"https://idjktsvr10.wil.local/arcgis/rest/services/NewGISInteractiveMap/OilPalm_Plantation_TP_Supplier/MapServer/0",title:"Oil Palm Plantation of Third Party Supplier",visible:!1}),e.layerPlantationArea=new f({url:"https://idjktsvr10.wil.local/arcgis/rest/services/NewGISInteractiveMap/Third_Party_Supplier/MapServer/2",title:"Oil Palm Area",visible:!1}),e.layerPeat=new f({url:"https://idjktsvr10.wil.local/arcgis/rest/services/NewGISInteractiveMap/Layer_Fungsi_Ekosistem_Gambut_201907_sde/MapServer/0",title:"Peat Ecosystem",visible:!1,outFields:["*"]}),e.layerPkCrushing=new f({url:"https://idjktsvr10.wil.local/arcgis/rest/services/industries_MIL1/MapServer/0",title:"PK Crushing",visible:!1}),e.layerRefinery=new f({url:"https://idjktsvr10.wil.local/arcgis/rest/services/NewGISInteractiveMap/Layer_Refinery_201908_sde/MapServer/0",title:"Refinery",visible:!1,popupEnabled:!0,outFields:["*"]}),e.layerPom=new f({url:"https://gisportal.wilmar.co.id/arcgisserver/rest/services/NewGISInteractiveMap_2/POM/MapServer/1",title:"POM Supplier",visible:!1,popupEnabled:!0,outFields:["pomid","PomName","CompanyNam","PlaceName","Tankcap","Silocap"]}),e.layerDeforestationPoint=new f({url:"https://idjktsvr10.wil.local/arcgis/rest/services/NewGISInteractiveMap/Deforestation/MapServer/0",title:"Deforestation Point",visible:!1,popupEnabled:!0,outFields:["*"]}),e.map.add(e.layerDeforestationPoint),e.layerDeforestationArea=new f({url:"https://idjktsvr10.wil.local/arcgis/rest/services/NewGISInteractiveMap/Deforestation/MapServer/1",title:"Deforestation Area",visible:!1});new c({url:"https://gisportal.wilmar.co.id/arcgisserver/rest/services/Hosted/Wilmar_Basemap2/VectorTileServer?f=pjson"});e.layerHotspot=new f({url:"https://idjktsvr10.wil.local/arcgis/rest/services/NewGISInteractiveMap/Hotspot_HSP1/MapServer/0",title:"Hotspot",visible:!1}),e.map.add(e.layerHotspot),e.sketchLayer=new h({listMode:"hide"}),e.bufferLayer=new h({listMode:"hide"}),e.map.addMany([e.sketchLayer,e.bufferLayer]);var _=new y({title:"Industries"}),I=new y({title:"Plantation"}),C=new y({title:"Deforestation"}),x=new y({title:"Land Issue"});_.addMany([e.layerPkCrushing,e.layerRefinery,e.layerPom]),I.addMany([e.layerPlantationArea,e.layerPlantationPoint]),C.addMany([e.layerDeforestationArea,e.layerDeforestationPoint]),x.addMany([e.layerPeat]),e.map.addMany([I,_,C,x]);var R=new m({view:e.view}),F=new d({view:e.view,content:R,expandTooltip:"Change Basemap"});e.view.ui.add(F,"top-right");var L=new p({view:e.view}),Y=new d({view:e.view,content:L,expandTooltip:"Layer List"});e.view.ui.add(Y,"top-right");var A=new g({view:e.view});e.view.ui.add(A,"bottom-right");new k({container:"timeSlider",playRate:50,stops:{interval:{value:1,unit:"hours"}}});var N={title:"POM Suplier",content:function(e){return O(e,"POM")}};e.layerPom.popupTemplate=N;var V={title:"Refinery",content:function(e){return O(e,"Refinery")}};e.layerRefinery.popupTemplate=V;var W={title:"Deforestation Point",content:function(e){return O(e,"Deforestation Point")}};e.layerDeforestationPoint.popupTemplate=W,w.whenTrue(e.view,"stationary",(function(){e.view.zoom>=10?(console.log(e.view.zoom),e.layerDeforestationArea.visible=!!e.layerDeforestationPoint.visible):e.layerDeforestationArea.visible=!1}))}))}},{key:"componentDidUpdate",value:function(){}},{key:"componentWillMount",value:function(){this.view&&(this.view.container=null)}},{key:"render",value:function(){var e,t=this;if(null==this.state.dfrsResult)e=i.a.createElement(V.a,{title:"Please choose date range"});else if(0==this.state.dfrsResult.length)e=i.a.createElement(W.a,null);else{var a=[];this.state.dfrsResult.map((function(e,n){a.push(i.a.createElement(te,{key:n,lat:e.attributes.POINT_X,lon:e.attributes.POINT_Y,startdate:e.attributes.start_date,enddate:e.attributes.end_date,peatland:e.attributes.peatland,mangrove:e.attributes.mangrove,other:e.attributes.other,total:e.attributes.total,index:n+1,zoomTo:function(){return t.f_zoomTo(e.attributes.POINT_Y,e.attributes.POINT_X)}}))})),e=i.a.createElement(M.a,{direction:"vertical"},a)}return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"webmap",ref:this.mapRef}),i.a.createElement("div",{className:"spinner"},i.a.createElement(X.a,{spinning:this.state.isLoading,size:"large",tip:"Loading..."})),i.a.createElement(x,{onClick:function(){return t.f_showDrawer(!0)},count:4}),i.a.createElement(U,{onClick:this.f_clearBufferLayers}),i.a.createElement($,{className:"button-hotspot",onClick:function(){return t.layerHotspot.visible=!t.layerHotspot.visible}}),i.a.createElement(m.a,{title:"Deforestation",placement:"right",closable:!0,onClose:function(){return t.f_showDrawer(!1)},visible:this.state.isDrawerShow,width:500},i.a.createElement(C,{timesRange:this.f_getDatesRange(j()("20190215"),j()()),onFinish:this.f_dfrsFormOnFinish,onClear:this.f_onClear}),i.a.createElement(D.a,null),i.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between"}},e)),i.a.createElement(J.a,{title:"Impacted",visible:this.state.showModal,onOk:function(e){return t.setState({showModal:!1})},onCancel:function(e){return t.setState({showModal:!1})},width:"80vw"},i.a.createElement(re,{data:this.state.modalData,location:this.state.dfrsPointGeom,dfrsArea:this.state.dfrsAreaGeom})))}}]),a}(i.a.Component);le.contextType=n;var oe=le,se=(a(373),F.a.Content);var ce=function(){return i.a.createElement(w,null,i.a.createElement(F.a,{style:{minHeight:"100vh"}},i.a.createElement(A,null),i.a.createElement(F.a,{className:"site-layout"},i.a.createElement(se,{style:{margin:"0 0px"}},i.a.createElement("div",{className:"site-layout-background",style:{minHeight:"100vh"}},i.a.createElement(oe,null))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(ce,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[207,1,2]]]);
//# sourceMappingURL=main.c768d543.chunk.js.map