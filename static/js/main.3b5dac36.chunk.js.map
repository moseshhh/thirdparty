{"version":3,"sources":["Components/DeforestationForm.jsx","Components/ButtonNotif.jsx","Config/context.js","Containers/Sidebar.jsx","Components/ButtonClear.jsx","Components/ButtonFire.jsx","Components/DfrsCard.jsx","Components/ModalContent.jsx","Containers/MapApp.jsx","Containers/tes.js","Components/Charts/TotalTitle.jsx","Components/Charts/DoughnoutCharts.jsx","Components/Charts/PeatCharts.jsx","Components/Charts/AreaCharts.jsx","Containers/Dashboard.jsx","App.js","serviceWorker.js","index.js"],"names":["formItemLayout","labelCol","xs","span","sm","wrapperCol","wrapperStyle","offset","DeforestationForm","props","useState","isTimeRangeDisable","setTimeRangeDisabled","isPeriodDisable","setPeriodDisabled","activeRadio","setActiveRadio","timesRange","name","onFinish","e","Group","onChange","target","value","Item","label","RangePicker","format","disabled","placeholder","map","el","i","start","end","Option","key","moment","type","htmlType","id","onClick","onClear","ButtonNotif","visible","setVisible","Fragment","className","count","shape","size","NotificationFilled","title","placement","closable","onClose","width","ContextType","React","createContext","Provider","Consumer","ContextProvider","state","activePage","f_setActivePage","setState","this","children","Component","Sidebar","Menu","SubMenu","context","useContext","collapsed","Sider","theme","defaultSelectedKeys","mode","icon","FileOutlined","PieChartOutlined","ButtonClear","ClearOutlined","ButtonFire","danger","FireFilled","DfrsCard","headStyle","impacted","backgroundColor","index","extra","zoomTo","layout","lat","lon","Date","startdate","enddate","peat","konsesi","other","total","_","require","doc","jsPDF","orientation","columnsPom","dataIndex","sorter","a","b","localeCompare","sortDirections","distance","render","status","color","columnsConc","columnsPeat","columnHotspot","ModalContent","generatePdf","text","headPom","dataPom","pomData","company","group","kabupaten","province","capacity","autoTable","head","body","startY","rowPageBreak","bodyStyles","valign","headConc","dataConc","concData","totalArea","totalImpacted","lastAutoTable","finalY","headPeat","dataPeat","peatData","remark","area","headHs","dataHs","hotspotData","latitude","longitude","acq_date","verification","save","processingData","loadModules","then","dfrsLoc","geometryEngine","projection","SpatialReference","data","arrayPom","arrayConc","arrayPeat","arrayHotspot","console","log","location","centroid","endLoc","geometry","jarak","getDistance","no","attributes","PomName","distanceNumber","GroupName","Kabupaten","PROPNAME","Tankcap","CompanyNam","sort","dataHotspot","Loc_Date","Latitude","Longitude","Verificati","load","outSpatialReference","wkid","g1","project","dfrsArea","g2","j","isIntersect","intersects","intersectArea","intersect","geodesicArea","toTitleCase","Name","toFixed","Province","Total_Ha","isNaN","parseFloat","Category","Number","Promise","all","newData","groupBy","warning","reducingDataPeat","reducingPeat","array","column","reduceData","undefined","reduce","accumulator","currentValue","push","obj","keys","sumBy","str","replace","txt","charAt","toUpperCase","substr","toLowerCase","style","height","overflow","paddingLeft","paddingRight","dataSource","columns","css","WsEndPoint","MapApp","f_showDrawer","showed","isDrawerShow","f_dfrsFormOnFinish","datamoment","whereCond","timeSelection","startDate","endDate","split","convertToPeriod","f_getDatesRange","query","layerDeforestationPoint","createQuery","where","layerDeforestationArea","queryFeatures","response","dfrsResult","features","definitionExpression","f_zoomTo","f","view","goTo","tilt","whenLayerView","layerview","result","highlightArea","remove","highlight","f_fetchTimeDfrs","fetch","json","timedata","f_clearBufferLayers","bufferLayer","removeAll","f_onClear","f_hotspot","f_downloadPdf","tableData","Period","start_date0","end_date","SUM_konses","SUM_peat_","mapRef","createRef","showModal","modalData","isLoading","dfrsPointGeom","dfrsAreaGeom","dark","light","nextStartDate","arr","add","reverse","ArcGISMap","MapView","VectorTileLayer","BasemapGallery","Expand","LayerList","FeatureLayer","GroupLayer","Graphic","GraphicsLayer","Legend","watchUtils","Query","TimeSlider","Zoom","DescriptionTable","isTrace","setTrace","detailDescription","Object","f_traceData","layername","url","layerPom","layerRefinery","resultData","lineSymbol","spiderLine","paths","X_Coor","Y_Coor","spiderLineGraphic","symbol","graphics","catch","error","f_clearGraphic","fontSize","bordered","pomid","position","rfid","f_button","DfrsPopupContent","layerPlantationArea","r","inputValue","setInputValue","pomInside","setPomInside","concInside","setConcInside","layerOptions","layerPeat","updateLayerVisibility","checked","checkFeatureInside","onSliderChange","forEach","layer","filterFeatureInside","dfFeatures","feature","calculateArea","intersectGeometry","concessionResult","geom1","geom2","geom","getItemAt","filter","spatialRelationship","returnGeometry","zoomToFeature","record","createList","concessionColumn","layerIntersectPolygon","polygonGraphic","outline","zoomToIntersect","mapingField","length","action","padding","start_date","defaultValue","max","tooltipPlacement","min","margin","opt","bottom","outFields","query2","queryHotspot","layerHotspot","featureSet","generateContent","popupDiv","document","createElement","pomPopupTemplate","content","ReactDOM","graphic","dpPopupTemplate","bufferSize","pointGeometry","bufferGeometry","geodesicBuffer","updateBufferGraphic","basemap","container","current","center","zoom","popup","dockEnabled","dockOptions","buttonEnabled","breakpoint","layerPlantationPoint","layerPkCrushing","popupEnabled","sketchLayer","listMode","addMany","glIndustries","glDeforestation","glLandIssue","zoomWidget","ui","components","basemapGallery","expand","expandTooltip","layerList","expandLayerList","legend","playRate","stops","interval","unit","popupTemplate","refineryPopupTemplate","concAreaTemplate","hsTemplate","daPopupTemplate","when","layerview1","on","evt","screenPoint","x","y","hitTest","results","whenTrue","dfrsContent","POINT_X","POINT_Y","peatland","mangrove","c","orderBy","d","dat","direction","ref","spinning","tip","block","display","flexDirection","justifyContent","onOk","onCancel","destroyOnClose","contextType","TotalTitle","data01","COLORS","Example","dataKey","isAnimationActive","cx","cy","outerRadius","fill","innerRadius","entry","PureComponent","jsfiddleUrl","AreaCharts","top","left","right","strokeDasharray","stroke","Dashboard","maxHeight","Content","Layout","App","minHeight","Boolean","window","hostname","match","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister","message"],"mappings":"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","file":"static/js/main.3b5dac36.chunk.js","sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\nimport { Button, Badge, Descriptions, Divider, Drawer, DatePicker, Form, Space, Select, Checkbox, Radio } from 'antd'\r\nimport { NotificationFilled } from '@ant-design/icons'\r\nimport { propTypes } from 'react-bootstrap/esm/Image';\r\nimport moment from 'moment'\r\n\r\nconst formItemLayout = {\r\n  labelCol: {\r\n    xs: {\r\n      span: 24,\r\n    },\r\n    sm: {\r\n      span: 8,\r\n    },\r\n  },\r\n  wrapperCol: {\r\n    xs: {\r\n      span: 24,\r\n    },\r\n    sm: {\r\n      span: 16,\r\n    },\r\n  },\r\n}\r\n\r\nconst wrapperStyle = {\r\n  xs: {\r\n    span: 24,\r\n    offset: 0,\r\n  },\r\n  sm: {\r\n    span: 16,\r\n    offset: 8,\r\n  },\r\n}\r\n\r\nconst DeforestationForm = (props) => {\r\n  const [isTimeRangeDisable, setTimeRangeDisabled ] = useState(true)\r\n  const [isPeriodDisable, setPeriodDisabled ] = useState(true)\r\n  const [activeRadio, setActiveRadio] = useState('todate')\r\n\r\n  const onRadioChange = e => {\r\n    setActiveRadio(e.target.value)\r\n    if(e.target.value == \"period\"){\r\n      setPeriodDisabled(false)\r\n      setTimeRangeDisabled(true)\r\n    }\r\n    else if(e.target.value == \"range-picker\"){\r\n      setPeriodDisabled(true)\r\n      setTimeRangeDisabled(false)\r\n    }\r\n    else if(e.target.value == \"all\"){\r\n      setPeriodDisabled(true)\r\n      setTimeRangeDisabled(true)\r\n    }\r\n    else if(e.target.value == 'todate' ){\r\n      setPeriodDisabled(true)\r\n      setTimeRangeDisabled(true)\r\n    }\r\n  }\r\n\r\n  function getDatesRange(startdate, enddate){\r\n    let nextStartDate = startdate\r\n    let arr = []\r\n    while(nextStartDate <= enddate){\r\n      let start = nextStartDate.format()\r\n      let end = nextStartDate.add(13, 'days').format()\r\n      arr.push([ start, end ])\r\n      nextStartDate = nextStartDate.add(1, 'days')\r\n    }\r\n    return arr.reverse()\r\n  }\r\n\r\n  // let timesRange =  getDatesRange(moment(\"20190215\"), moment())\r\n  let timesRange = props.timesRange\r\n\r\n  return (\r\n    <Form name=\"deforestation_control\" {...formItemLayout} onFinish={ (e) => props.onFinish(e, activeRadio) } >\r\n      <Radio.Group onChange={ onRadioChange } value={activeRadio}>\r\n        <Radio value=\"todate\">To Date</Radio>\r\n        <Radio value=\"range-picker\">Time Range</Radio>\r\n        <Radio value=\"period\">Time Period</Radio>\r\n        <Radio value=\"all\">Select All</Radio>\r\n      </Radio.Group>\r\n      <Divider />\r\n      <Form.Item name=\"range-picker\" label=\"Time Range\">\r\n          <DatePicker.RangePicker format=\"YYYY/MM/DD\" disabled={isTimeRangeDisable} />\r\n      </Form.Item>\r\n      <Divider>Or</Divider>\r\n      <Form.Item name=\"period-time\" label=\"Period Time\">\r\n        <Select placeholder=\"select time period\" disabled={isPeriodDisable}>\r\n          {\r\n            timesRange.map( (el, i) => {\r\n              let [start, end] = el\r\n              return (<Select.Option key={i} value={ `${ moment(start).format(\"YYYY-MM-DD\") }|${ moment( end ).format(\"YYYY-MM-DD\") }`}>\r\n                { moment( start ).format(\"MMM Do YYYY\")} - { moment( end ).format(\"MMM Do YYYY\")}\r\n              </ Select.Option> )\r\n            })\r\n          }\r\n        </Select>\r\n      </Form.Item>\r\n      <Form.Item wrapperCol={wrapperStyle} >\r\n        <Space>\r\n          <Button type=\"primary\" htmlType=\"submit\" id=\"button-form-deforestation\">Submit</Button>\r\n          <Button type=\"primary\" onClick={props.onClear} >Clear</Button>\r\n        </Space>\r\n      </Form.Item>\r\n    </Form>\r\n  )\r\n}\r\n\r\nexport default DeforestationForm","import React, { useEffect, useRef, useState } from 'react';\r\nimport { Button, Badge, Descriptions, Divider, Drawer, DatePicker, Form } from 'antd'\r\nimport { NotificationFilled } from '@ant-design/icons'\r\nimport DeforestationForm from './DeforestationForm'\r\n\r\nlet ButtonNotif = (props) => {\r\n  let [visible, setVisible] = useState(false)\r\n  const showDrawer = () => {\r\n    setVisible(true);\r\n  };\r\n\r\n  const onClose = () => {\r\n    setVisible(false);\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className=\"button-notif\">\r\n        <Badge count={props.count}>\r\n          {/* <Button type=\"primary\" shape=\"circle\" size=\"large\" id=\"buttonNotif\" onClick={showDrawer} > */}\r\n          <Button type=\"primary\" shape=\"circle\" size=\"large\" id=\"buttonNotif\" onClick={props.onClick} >\r\n            <NotificationFilled />\r\n          </Button>\r\n        </Badge>\r\n      </div>\r\n      <Drawer\r\n        title=\"Deforestation\"\r\n        placement=\"right\"\r\n        closable={true}\r\n        onClose={onClose}\r\n        visible={visible}\r\n        width={500}\r\n      >\r\n        {/* <DeforestationForm onFinish={(data) => console.log(\"halo\", data)} /> */}\r\n      </Drawer>\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nexport default ButtonNotif","import React from 'react'\r\n\r\nlet ContextType = React.createContext()\r\nconst {Provider, Consumer} = ContextType\r\n\r\nclass ContextProvider extends React.Component{\r\n  state = {\r\n    activePage : 'map'\r\n  }\r\n\r\n  f_setActivePage = (value) => {\r\n    this.setState({ activePage : value})\r\n  }\r\n\r\n  render(){\r\n    return(\r\n      <Provider value = {{\r\n        ...this.state,\r\n        f_setActivePage : this.f_setActivePage\r\n      }}>\r\n        {this.props.children}\r\n      </Provider>\r\n    )\r\n  }\r\n}\r\n\r\nexport{ ContextProvider, Consumer, ContextType}\r\n","import React, { useState, useContext } from 'react';\r\nimport { Layout, Menu } from 'antd';\r\nimport {ContextType} from '../Config/context'\r\nimport {\r\n  PieChartOutlined,\r\n  FileOutlined,\r\n  TeamOutlined,\r\n  UserOutlined,\r\n} from '@ant-design/icons';\r\nconst { SubMenu } = Menu;\r\n\r\nlet Sidebar = (props) => {\r\n  let context = useContext(ContextType)\r\n  const [collapsed, setCollapsed] = useState(true)\r\n\r\n  const f_handleChange = function(e){\r\n    context.f_setActivePage(e.key)\r\n  }\r\n\r\n  return (\r\n    <Layout.Sider collapsed={collapsed}>\r\n      <div className=\"logo\">\r\n      </div>\r\n      <Menu theme=\"dark\" onClick={f_handleChange} defaultSelectedKeys={[context.activePage]} mode=\"inline\">\r\n        <Menu.Item key=\"dashboard\" icon={<FileOutlined />} />\r\n        <Menu.Item key=\"map\" icon={<PieChartOutlined />}>\r\n          Maps\r\n        </Menu.Item>\r\n      </Menu>\r\n    </ Layout.Sider>\r\n  );\r\n}\r\n\r\nexport default Sidebar;\r\n","import React, { useEffect, useRef, useState } from 'react';\r\nimport { Button, Badge, Descriptions, Divider, Drawer, DatePicker, Form } from 'antd'\r\nimport { ClearOutlined } from '@ant-design/icons'\r\nimport DeforestationForm from './DeforestationForm'\r\n\r\nconst ButtonClear = (props) => {\r\n  let [visible, setVisible] = useState(false)\r\n  const showDrawer = () => {\r\n    setVisible(true);\r\n  };\r\n\r\n  const onClose = () => {\r\n    setVisible(false);\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className=\"button-clear\">\r\n        <Badge count={props.count}>\r\n          {/* <Button type=\"primary\" shape=\"circle\" size=\"large\" id=\"ButtonClear\" onClick={showDrawer} > */}\r\n          <Button type=\"primary\" shape=\"circle\" size=\"large\" id=\"buttonClear\" onClick={props.onClick} >\r\n            <ClearOutlined />\r\n          </Button>\r\n        </Badge>\r\n      </div>\r\n      <Drawer\r\n        title=\"Deforestation\"\r\n        placement=\"right\"\r\n        closable={true}\r\n        onClose={onClose}\r\n        visible={visible}\r\n        width={500}\r\n      >\r\n        {/* <DeforestationForm onFinish={(data) => console.log(\"halo\", data)} /> */}\r\n      </Drawer>\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nexport default ButtonClear","import React, { useEffect, useRef, useState } from 'react';\r\nimport { Button } from 'antd';\r\nimport { FireFilled } from '@ant-design/icons'\r\n\r\nconst ButtonFire = (props) => {\r\n  return (\r\n    <div className={props.className}>\r\n        <Button type=\"primary\" shape=\"circle\" size=\"large\" id=\"buttonClear\" onClick={props.onClick} danger={true}>\r\n          <FireFilled />\r\n        </Button>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ButtonFire","import React from 'react'\r\nimport { Card, Descriptions, Button } from 'antd'\r\nimport moment from 'moment'\r\n\r\nconst DfrsCard = props => {\r\n  let redHead = {backgroundColor : 'red'}\r\n  let headStyle = props.impacted ? redHead : null\r\n  return (\r\n    <Card type=\"inner\" title={`Deforestation ${props.index}`} headStyle={headStyle}  extra={<Button type=\"dashed\" onClick={props.zoomTo} >Zoom to</Button>}>\r\n      <Descriptions size=\"small\" layout=\"vertical\" >\r\n        <Descriptions.Item label=\"Latitude\">{props.lat}</Descriptions.Item>\r\n        <Descriptions.Item label=\"Longitude\">{props.lon}</Descriptions.Item>\r\n        <Descriptions.Item label=\"Start Date\">{ moment(new Date(props.startdate)).format(\"yyyy/MM/DD\")}</Descriptions.Item>\r\n        <Descriptions.Item label=\"End Date\">{ moment( new Date(props.enddate)).format(\"yyyy/MM/DD\")}</Descriptions.Item>\r\n        {/* <Descriptions.Item label=\"Peatland\">{props.peatland} ha</Descriptions.Item> */}\r\n        <Descriptions.Item label=\"Peatland\">{props.peat} ha</Descriptions.Item>\r\n        {/* <Descriptions.Item label=\"Mangrove\">{props.mangrove} ha</Descriptions.Item> */}\r\n        <Descriptions.Item label=\"Concession\">{props.konsesi} ha</Descriptions.Item>\r\n        <Descriptions.Item label=\"Other\">{props.other} ha</Descriptions.Item>\r\n        <Descriptions.Item label=\"Total\">{props.total} ha</Descriptions.Item>\r\n        {/* <Descriptions.Item label=\"id\">{props.id} ha</Descriptions.Item> */}\r\n      </Descriptions>\r\n    </Card>\r\n  )\r\n}\r\nexport default DfrsCard","import React, { useEffect, useState } from 'react'\r\nimport { Table, Divider, Tag, Button } from 'antd'\r\nimport { getDistance } from 'geolib'\r\nimport { loadModules } from 'esri-loader'\r\nimport $ from 'jquery'\r\nimport jsPDF from 'jspdf'\r\nimport 'jspdf-autotable'\r\nconst _ = require('lodash')\r\n// import autoTable from 'jspdf-autotable'\r\n\r\nconst doc = new jsPDF({\r\n  orientation: \"landscape\"\r\n})\r\n\r\nconst columnsPom = [\r\n  {\r\n    title: 'Pom Name',\r\n    dataIndex: 'name',\r\n    key: 'name',\r\n    span: 10,\r\n    sorter: (a, b) => a.name.localeCompare(b.name),\r\n    sortDirections: ['ascend']\r\n  },\r\n  {\r\n    title: 'Company',\r\n    dataIndex: 'company',\r\n    key: 'company',\r\n    span: 10,\r\n  },\r\n  {\r\n    title: 'Group',\r\n    dataIndex: 'group',\r\n    key: 'group',\r\n    span: 10,\r\n  },\r\n  {\r\n    title: 'District',\r\n    dataIndex: 'kabupaten',\r\n    key: 'kabupaten',\r\n    span: 10,\r\n  },\r\n  {\r\n    title: 'Province',\r\n    dataIndex: 'province',\r\n    key: 'province',\r\n    span: 10,\r\n  },\r\n  {\r\n    title: 'Capacity',\r\n    dataIndex: 'capacity',\r\n    key: 'capacity',\r\n    span: 10,\r\n  },\r\n  {\r\n    title: 'Distance (estimation) in Km',\r\n    dataIndex: 'distance',\r\n    key: 'distance',\r\n    span: 10,\r\n    sorter: (a, b) => a.distance - b.distance\r\n  },\r\n  {\r\n    title: \"Status\",\r\n    dataIndex: 'status',\r\n    key: 'status',\r\n    span: 10,\r\n    render: status => {\r\n      let color = status == \"warning\" ? 'yellow' : 'red'\r\n      return (\r\n        <Tag color={color} key={status}>\r\n          {status}\r\n        </Tag>\r\n      )\r\n    }\r\n  },\r\n];\r\nconst columnsConc = [\r\n  {\r\n    title: 'Concession',\r\n    dataIndex: 'name',\r\n    key: 'name',\r\n    span : 10\r\n  },\r\n  {\r\n    title: 'Group',\r\n    dataIndex: 'group',\r\n    key: 'groupe',\r\n    span : 10\r\n  },\r\n  {\r\n    title: 'Province',\r\n    dataIndex: 'province',\r\n    key: 'provincee',\r\n    span : 10\r\n  },\r\n  {\r\n    title: 'Total Area',\r\n    dataIndex: 'totalArea',\r\n    key: 'totalArea',\r\n    span : 10\r\n  },\r\n  {\r\n    title: 'Impacted',\r\n    dataIndex: 'totalImpacted',\r\n    key: 'totalImpacted',\r\n    span : 10\r\n  },\r\n  {\r\n    title: 'Distance in Km (Estimation)',\r\n    dataIndex: 'distance',\r\n    key: 'distance',\r\n    span : 10,\r\n    sorter: (a, b) => a.distance - b.distance,\r\n  },\r\n  {\r\n    title: \"Status\",\r\n    dataIndex: 'status',\r\n    key: 'status',\r\n    span: 10,\r\n    render: status => {\r\n      let color = status == \"warning\" ? 'yellow' : 'red'\r\n      return (\r\n        <Tag color={color} key={status}>\r\n          {status}\r\n        </Tag>\r\n      )\r\n    }\r\n  },\r\n];\r\nconst columnsPeat = [\r\n  {\r\n    title : 'Remarks',\r\n    dataIndex : 'remark',\r\n    key : 'remark',\r\n    span : 10\r\n  },\r\n  // {\r\n  //   title: 'Distance in Km (Estimation)',\r\n  //   dataIndex: 'distance',\r\n  //   key: 'distance',\r\n  //   span : 10,\r\n  //   sorter: (a, b) => a.distance - b.distance,\r\n  // },\r\n  {\r\n    title: 'Status',\r\n    dataIndex: 'status',\r\n    key: 'status',\r\n    span : 10,\r\n  },\r\n  {\r\n    title : 'Total Area',\r\n    dataIndex : 'area',\r\n    key : 'area',\r\n    span : 10\r\n  },\r\n  // {\r\n  //   title: \"Action\",\r\n  //   dataIndex: 'action',\r\n  //   key: 'action',\r\n  //   span: 10\r\n  // }\r\n]\r\nconst columnHotspot = [\r\n  {\r\n    title : 'Latitude',\r\n    dataIndex : 'latitude',\r\n    key : 'latitude',\r\n    span : 10\r\n  },\r\n  {\r\n    title : 'Longitude',\r\n    dataIndex : 'longitude',\r\n    key : 'longitude',\r\n    span : 10\r\n  },\r\n  {\r\n    title : 'Acquisition Date',\r\n    dataIndex : 'acq_date',\r\n    key : 'acq_date',\r\n    span : 10\r\n  },\r\n  {\r\n    title : 'Verification',\r\n    dataIndex : 'verification',\r\n    key : 'verification',\r\n    span : 10\r\n  },\r\n]\r\n\r\n\r\nclass ModalContent extends React.Component {\r\n  constructor(props){\r\n    super(props)\r\n    this.state = {\r\n      pomData : [],\r\n      concData : [],\r\n      peatData : [],\r\n      hotspotData : []\r\n    }\r\n  }\r\n\r\n  toTitleCase(str) {\r\n    return str.replace(\r\n      /\\w\\S*/g,\r\n      function(txt) {\r\n        return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();\r\n      }\r\n    );\r\n  }\r\n\r\n  generatePdf = () => {\r\n    doc.text('Basic Information', 14, 20)\r\n    doc.text( \"Location : 100.2854, 2.3290\", 14, 30)\r\n    doc.text( \"Radius : 40 Km\", 14, 40)\r\n    doc.text( \"Time Period : 8/28/2020 - 9/10/2020\", 14, 50)\r\n\r\n\r\n    // POM\r\n    let headPom = columnsPom.map(el => el.title)\r\n    let dataPom = this.state.pomData.map(\r\n      el => {\r\n        return [el.name, el.company, el.group, el.kabupaten, el.province, el.capacity, el.distance, el.status]\r\n      }\r\n    )\r\n\r\n    doc.text(\"3rd Party Mill\", 14,  70)\r\n    doc.autoTable({\r\n      head : [headPom],\r\n      body : dataPom,\r\n      startY: 75,\r\n      // styles: { overflow: 'ellipsize', cellWidth: 'wrap' },\r\n      // Override the default above for the text column\r\n      // columnStyles: { text: { cellWidth: 'auto' } },\r\n      rowPageBreak: 'auto',\r\n      bodyStyles: { valign: 'top' },\r\n    })\r\n\r\n    // CONCESSION\r\n    let headConc = columnsConc.map(el => el.title)\r\n    let dataConc = this.state.concData.map(\r\n      el => {\r\n        return [el.name, el.group, el.province, el.totalArea,el.totalImpacted, el.distance, el.status]\r\n      }\r\n    )\r\n    doc.text(\r\n      \"Concession\",\r\n      14,\r\n      doc.lastAutoTable.finalY + 20\r\n    )\r\n    doc.autoTable({\r\n      head : [headConc],\r\n      body : dataConc,\r\n      startY: doc.lastAutoTable.finalY + 25,\r\n      rowPageBreak: 'auto',\r\n      bodyStyles: { valign: 'top' },\r\n    })\r\n\r\n    // PEATLAND\r\n    let headPeat = columnsPeat.map(el => el.title )\r\n    let dataPeat = this.state.peatData.map(\r\n      el => {\r\n        return [ el.remark, el.distance, el.area ]\r\n      }\r\n    )\r\n    doc.text(\r\n      \"Peatland\",\r\n      14,\r\n      doc.lastAutoTable.finalY + 20\r\n    )\r\n    doc.autoTable({\r\n      head : [headPeat],\r\n      body : dataPeat,\r\n      startY: doc.lastAutoTable.finalY + 25,\r\n      rowPageBreak: 'auto',\r\n      bodyStyles: { valign: 'top' },\r\n    })\r\n\r\n    // HOTSPOT\r\n    let headHs = columnHotspot.map(el => el.title)\r\n    let dataHs = this.state.hotspotData.map(\r\n      el => {\r\n        return [el.latitude, el.longitude, el.acq_date, el.verification]\r\n      }\r\n    )\r\n    doc.text(\r\n      \"HotSpot\",\r\n      14,\r\n      doc.lastAutoTable.finalY + 20\r\n    )\r\n    doc.autoTable({\r\n      head : [headHs],\r\n      body : dataHs,\r\n      startY: doc.lastAutoTable.finalY + 25,\r\n      rowPageBreak: 'auto',\r\n      bodyStyles: { valign: 'top' },\r\n    })\r\n\r\n    doc.save('table.pdf')\r\n  }\r\n\r\n  processingData = () => {\r\n    loadModules([\r\n      \"esri/geometry/geometryEngine\",\r\n      \"esri/geometry/projection\",\r\n      \"esri/geometry/SpatialReference\"\r\n    ]).then(([geometryEngine, projection, SpatialReference]) => {\r\n      let props = this.props\r\n      const [arrayPom, arrayConc, arrayPeat, arrayHotspot] = props.data\r\n      console.log(\"modalcontent\", props.data)\r\n      let dfrsLoc\r\n      if(props.location.type == \"point\"){\r\n        dfrsLoc = { latitude: props.location.latitude, longitude: props.location.longitude }\r\n      }\r\n      else if(props.location.type == \"polygon\"){\r\n        dfrsLoc = { latitude: props.location.centroid.latitude, longitude: props.location.centroid.longitude }\r\n      }\r\n      // console.log(\"hs\", arrayHotspot)\r\n      // console.log(arr)\r\n      // destructuring data POM dan loop, sehingga didapatkan jarak ke titik deforestasi\r\n      let dataPom = arrayPom.map((el, i) => {\r\n        let endLoc = { latitude: el.geometry.latitude, longitude: el.geometry.longitude }\r\n        console.log(\"dfrs loc\", dfrsLoc)\r\n        console.log(\"end loc\", endLoc)\r\n        let jarak = getDistance(dfrsLoc, endLoc)\r\n        let status = jarak > 1000 ? 'warning' : 'impacted'\r\n        return {\r\n          key: i,\r\n          no: i + 1,\r\n          name: el.attributes.PomName,\r\n          distance: jarak / 1000,\r\n          distanceNumber: jarak,\r\n          status: status,\r\n          group : el.attributes.GroupName,\r\n          kabupaten : el.attributes.Kabupaten,\r\n          province : el.attributes.PROPNAME,\r\n          capacity : el.attributes.Tankcap,\r\n          company : el.attributes.CompanyNam\r\n        }\r\n      })\r\n      // sort ascending\r\n      dataPom.sort((a, b) => a.distanceNumber - b.distanceNumber)\r\n      // console.log(\"datapom\", dataPom)\r\n\r\n      let dataHotspot = arrayHotspot.map( (el,i) => {\r\n        return{\r\n          key : i,\r\n          acq_date : el.attributes.Loc_Date,\r\n          latitude : el.attributes.Latitude,\r\n          longitude : el.attributes.Longitude,\r\n          verification : el.attributes.Verificati\r\n        }\r\n      })\r\n      console.log(\"dataHotspot\", dataHotspot)\r\n\r\n      // Destructuring data konsesi, karena datanya berupa area dan projeksinya berbeda, perlu load module projection dari Arcmap\r\n      // dan akan mereturn promise\r\n      let dataConc = arrayConc.map((el, i) => {\r\n        return projection.load().then(\r\n          () => {\r\n            let area\r\n            let outSpatialReference = new SpatialReference({\r\n              wkid: 3857 //Sphere_Sinusoidal projection\r\n            });\r\n            let g1 = projection.project(props.dfrsArea, outSpatialReference)\r\n            let g2 = projection.project(el.geometry, outSpatialReference)\r\n            let j = geometryEngine.distance(g1, g2)\r\n            let status = j < 10 ? 'impacted' : 'warning'\r\n\r\n            let isIntersect = geometryEngine.intersects(g1, g2)\r\n            console.log(\"intersect\", isIntersect)\r\n            if(isIntersect){\r\n              let intersectArea = geometryEngine.intersect(g1,g2)\r\n              area = geometryEngine.geodesicArea(intersectArea, \"hectares\")\r\n            }\r\n            else{\r\n              area = ''\r\n            }\r\n\r\n            let result = {\r\n              key: i,\r\n              no: i + 1,\r\n              name: this.toTitleCase( el.attributes.Name ),\r\n              // area: 10,\r\n              distance: (j / 1000).toFixed(2),\r\n              status: status,\r\n              group : el.attributes.GroupName,\r\n              province : el.attributes.Province,\r\n              totalArea : el.attributes.Total_Ha,\r\n              totalImpacted : isNaN(area)? '' : parseFloat(area).toFixed(3)\r\n            }\r\n            return result\r\n          }\r\n        )\r\n      })\r\n\r\n      // Destructuring data Peat\r\n      let dataPeat = arrayPeat.map( (el, i) => {\r\n        console.log(\"el\", el)\r\n        return projection.load().then(\r\n          () => {\r\n            let outSpatialReference = new SpatialReference({\r\n              wkid: 3857 //Sphere_Sinusoidal projection\r\n            });\r\n            let g1 = projection.project(props.dfrsArea, outSpatialReference)\r\n            let g2 = projection.project(el.geometry, outSpatialReference)\r\n            let j = geometryEngine.distance(g1, g2)\r\n            let status = j < 1000 ? 'impacted' : 'warning'\r\n            return {\r\n              remark : el.attributes.Category,\r\n              area : Number( el.attributes[\"SHAPE.STArea()\"] ),\r\n              key : i,\r\n              status : status,\r\n              distance: (j / 1000).toFixed(2),\r\n            }\r\n          }\r\n        )\r\n      })\r\n\r\n      // Karena data konsesi yang bersinggunan mereturn promise, makan perlu di promise all array tersebut, setekah promise sukses kemudian ubah state agar tampilan data berubah\r\n      Promise.all(dataConc).then(\r\n        // konsesi => setConcData(konsesi)\r\n        konsesi => this.setState({\r\n          concData : konsesi\r\n        })\r\n      )\r\n      Promise.all(dataPeat).then(\r\n        // peat => setPeatData(peat)\r\n        peat => {\r\n          console.log(\"peat\", peat)\r\n          let newData = _.groupBy(peat, 'status')\r\n          let impacted = _.groupBy(newData['impacted'], 'remark')\r\n          let warning = _.groupBy(newData['warning'], 'remark')\r\n\r\n          let reducingDataPeat = []\r\n          function reducingPeat(array, column){\r\n            let data = array[column]\r\n            let reduceData = null\r\n            if(data !== undefined) {\r\n              reduceData = data.reduce(\r\n                (accumulator, currentValue) => {\r\n                  let totalArea = accumulator.area + currentValue.area\r\n                  return { remark : currentValue.remark, area : totalArea, key : 1, status : currentValue.status }\r\n                }\r\n              )\r\n              reducingDataPeat.push(reduceData)\r\n            }\r\n            return reduceData\r\n          }\r\n\r\n          let impactedBudidaya = reducingPeat(impacted, 'Indikatif Fungsi Budidaya')\r\n          let impactedLindung = reducingPeat(impacted, 'Indikatif Fungsi Lindung')\r\n          let warningBudidaya = reducingPeat(warning, 'Indikatif Fungsi Budidaya')\r\n          let warningLindung = reducingPeat(warning, 'Indikatif Fungsi Lindung')\r\n\r\n\r\n          // let reducingDataPeat = [impactedBudidaya, impactedLindung, warningBudidaya, warningLindung]\r\n\r\n          // let impactedBudidaya = impacted['Indikatif Fungsi Budidaya'].reduce( (accumulator, currentValue) => {\r\n          //   let totalArea = accumulator.area + currentValue.area\r\n          //   return { remark : currentValue.remark, area = totalArea, key : 1, status : currentValue.status }\r\n          // })\r\n\r\n          let result = _(peat)\r\n            .groupBy('remark')\r\n            .map( (obj, keys) => ({\r\n              'remark' : keys,\r\n              'area' : _.sumBy(obj, 'area')\r\n            })).value()\r\n\r\n          this.setState({\r\n            // peatData : peat\r\n            // peatData : result\r\n            peatData : reducingDataPeat\r\n          })\r\n        }\r\n      )\r\n      // setPomData(dataPom)\r\n      // setHotspotData(dataHotspot)\r\n\r\n      this.setState({\r\n        hotspotData : dataHotspot,\r\n        pomData : dataPom\r\n      })\r\n    })\r\n  \r\n  }\r\n\r\n  componentDidMount(){\r\n    this.processingData()\r\n  }\r\n\r\n  render(){\r\n    let { pomData, concData, peatData, hotspotData} = this.state\r\n    return(\r\n    <div style={{ height: '60vh', overflow: 'scroll', paddingLeft: '5vw', paddingRight: '5vw' }}>\r\n      <h2>Mill - Third Party Supplier</h2>\r\n      <Table id=\"pomTable\" dataSource={pomData} columns={columnsPom} />\r\n      <Divider />\r\n      <h2>Concession</h2>\r\n      <Table dataSource={concData} columns={columnsConc} />\r\n      <Divider />\r\n      <h2>Peat</h2>\r\n      <Table dataSource={peatData} columns={columnsPeat} />\r\n      <Divider />\r\n      <h2>Hotspot</h2>\r\n      <Table dataSource={hotspotData} columns={columnHotspot} />\r\n      <Divider />\r\n      <Button type=\"dashed\" onClick={this.generatePdf} >Export to PDF</Button>\r\n      <Divider />\r\n    </div>\r\n    )\r\n  }\r\n\r\n}\r\n\r\n\r\nexport default ModalContent","import React, { useState } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport {ContextType} from '../Config/context'\r\nimport { loadModules } from 'esri-loader';\r\nimport { Button, Descriptions, Divider, Drawer, Slider, Checkbox, Space, Result, Empty, Modal, InputNumber, Row, Col, Spin, Table } from 'antd'\r\nimport ButtonNotif from '../Components/ButtonNotif';\r\nimport ButtonClear from '../Components/ButtonClear';\r\nimport ButtonFire from '../Components/ButtonFire'\r\nimport DeforestationForm from '../Components/DeforestationForm';\r\nimport DfrsCard from '../Components/DfrsCard'\r\nimport ModalContent from '../Components/ModalContent'\r\nimport moment from 'moment'\r\nimport PickerButton from 'antd/lib/date-picker/PickerButton';\r\nimport jsPDF from 'jspdf'\r\nimport 'jspdf-autotable'\r\nimport MapView from './tes'\r\nconst _ = require('lodash');\r\n\r\nconst doc = new jsPDF({\r\n  orientation: \"landscape\"\r\n})\r\n\r\nconst WsEndPoint = \"http://10.7.12.21:8000/service/WGService.asmx/\"\r\n\r\nclass MapApp extends React.Component {\r\n  static contextType = ContextType\r\n\r\n  constructor(props, context) {\r\n    super(props, context)\r\n    this.mapRef = React.createRef()\r\n    this.state = {\r\n      isDrawerShow : false,\r\n      dfrsResult : [],\r\n      timedata : [],\r\n      showModal : false,\r\n      modalData : [],\r\n      isLoading : false,\r\n      dfrsPointGeom : [],\r\n      dfrsAreaGeom : null,\r\n      timeSelection : []\r\n    }\r\n\r\n    this.theme = {\r\n      dark : \"https://js.arcgis.com/4.16/esri/themes/dark/main.css\",\r\n      light : true,\r\n    }\r\n\r\n    this.f_fetchTimeDfrs()\r\n  }\r\n\r\n  //=============================================================\r\n  // FUNCTION\r\n  //=============================================================\r\n  f_showDrawer = (showed) => {\r\n    this.setState({\r\n      isDrawerShow : showed\r\n    })\r\n  }\r\n\r\n  f_dfrsFormOnFinish = (datamoment, type) => {\r\n    let whereCond, timeSelection\r\n    if(type == \"range-picker\"){\r\n      let startDate = datamoment[\"range-picker\"][0].format(\"YYYY-MM-DD\")\r\n      let endDate = datamoment[\"range-picker\"][1].format(\"YYYY-MM-DD\")\r\n      // whereCond = `end_date >= '${startDate}' and end_date <= '${endDate}'`\r\n      whereCond = `start_date >= date'${startDate}' and end_date <= date'${endDate}'`\r\n      timeSelection = [startDate, endDate]\r\n    }\r\n    else if(type == \"period\"){\r\n      let [start, end ] = datamoment[\"period-time\"].split(\"|\")\r\n      let convertToPeriod = `${moment(start).format(\"MMM DD, YYYY\")} - ${moment(end).format(\"MMM DD, YYYY\")}`\r\n      whereCond = `Period = '${convertToPeriod}'`\r\n      // whereCond = `Period = 'Sep 11, 2020 - Sep 24, 2020'`\r\n      // whereCond = `end_date >= date'${start}' and end_date <= date'${end}'`\r\n      // whereCond = `start_date >= '${start}' and end_date <= '${end}'`\r\n      timeSelection = [start, end]\r\n    }\r\n    else if(type == \"all\"){\r\n      whereCond = ``\r\n      timeSelection = []\r\n    }\r\n    else if(type == \"todate\"){\r\n      let [start, end] = this.f_getDatesRange(moment(\"20190215\"), moment())[0]\r\n      // console.log(\"TimeRange\", todate )\r\n      whereCond = `end_date >= date'${start}' and end_date <= date'${end}'`\r\n      timeSelection = [start, end]\r\n    }\r\n    this.setState({ timeSelection : timeSelection })\r\n\r\n    // FILTER UNTUK CARD SELECTION\r\n    let query =  this.layerDeforestationPoint.createQuery()\r\n    query.where = whereCond\r\n    // this.layerDeforestationPoint.queryFeatures(query).then(response => this.setState({ dfrsResult : response.features }) )\r\n    this.layerDeforestationArea.queryFeatures(query).then(response => this.setState({ dfrsResult : response.features }) )\r\n\r\n    // FILTER DEFORESTASI DI LAYER\r\n    this.layerDeforestationPoint.definitionExpression = whereCond\r\n    this.layerDeforestationPoint.visible = true\r\n  }\r\n\r\n  f_zoomTo = (f) => {\r\n    // console.log(lat, lon)\r\n    // console.log(\"that features\", f)\r\n    this.view.goTo({ target : f.geometry, tilt : 70})\r\n\r\n    // HIGHLIGHT\r\n    this.view.whenLayerView(this.layerDeforestationArea).then(\r\n      (layerview) => {\r\n        let query = this.layerDeforestationArea.createQuery()\r\n        query.where = `id = '${f.attributes.id}'`\r\n        this.layerDeforestationArea.queryFeatures(query).then(\r\n          result => {\r\n            console.log(\"rf\", result.features)\r\n            if(this.highlightArea){\r\n              this.highlightArea.remove()\r\n            }\r\n\r\n            this.highlightArea = layerview.highlight(result.features)\r\n\r\n          } \r\n        )\r\n      }\r\n    )\r\n\r\n    // this.view.center = [lon, lat]\r\n    // this.view.zoom = 13\r\n  }\r\n\r\n  f_fetchTimeDfrs = () => {\r\n    fetch(`https://idjktsvr10.wil.local/arcgis/rest/services/NewGISInteractiveMap/Deforestation/MapServer/0/query?f=json&outFields=[start_date,end_date]&where=1=1&returnGeometry=false`)\r\n      .then(response => response.json() )\r\n      .then( data => this.setState({\r\n        timedata : data.features\r\n      }) )\r\n  }\r\n\r\n  f_clearBufferLayers = () => {\r\n    this.bufferLayer.removeAll()\r\n  }\r\n\r\n  f_getDatesRange(startdate, enddate){\r\n    let nextStartDate = startdate\r\n    let arr = []\r\n    while(nextStartDate <= enddate){\r\n      let start = nextStartDate.format()\r\n      let end = nextStartDate.add(13, 'days').format()\r\n      arr.push([ start, end ])\r\n      nextStartDate = nextStartDate.add(1, 'days')\r\n    }\r\n    return arr.reverse()\r\n  }\r\n\r\n  f_onClear = () => {\r\n    this.setState({ dfrsResult : [] })\r\n    this.layerDeforestationPoint.visible = false\r\n  }\r\n\r\n  f_hotspot = () => {\r\n    let column = ['start date', 'end date', 'lat', 'lon', 'conssesion', 'mangrove', 'other', 'total']\r\n    \r\n  }\r\n\r\n  f_downloadPdf = () => {\r\n    console.log(\"data to pdf\", this.state.dfrsResult)\r\n    let tableData = this.state.dfrsResult.map( (el, i) => [ i+1, el.attributes.Period, parseFloat(el.geometry.centroid.latitude).toFixed(3), parseFloat(el.geometry.centroid.longitude).toFixed(3), moment(el.attributes.start_date0).format(\"MMM DD, YYYY\"), moment(el.attributes.end_date).format(\"MMM DD, YYYY\"), parseFloat(el.attributes.SUM_konses /1000).toFixed(2), parseFloat(el.attributes.SUM_peat_ ).toFixed(2)])\r\n\r\n    // doc.text(`Deforestation at period ${this.state.timeSelection[0]} - ${this.state.timeSelection[1]}`, 20, 20)\r\n\r\n    doc.autoTable({\r\n      head : [['no', 'period', 'latitude', 'longitude', 'start', 'end', 'concession', 'peatland']],\r\n      body : tableData,\r\n      startY : 40,\r\n      rowPageBreak: 'auto',\r\n      bodyStyles: { valign: 'top' },\r\n    })\r\n\r\n    doc.save(\"tes.pdf\")\r\n  }\r\n  //\r\n  // LIFECYCLE\r\n  //\r\n  componentDidMount() {\r\n    loadModules(['esri/Map', 'esri/views/MapView', 'esri/layers/VectorTileLayer', 'esri/widgets/BasemapGallery', 'esri/widgets/Expand', \"esri/widgets/LayerList\", \"esri/layers/FeatureLayer\", \"esri/layers/GroupLayer\", \"esri/Graphic\", \"esri/layers/GraphicsLayer\", \"esri/widgets/Legend\", \"esri/geometry/geometryEngine\", \"esri/core/watchUtils\", \"esri/widgets/DistanceMeasurement2D\", \"esri/tasks/support/Query\", \"esri/widgets/TimeSlider\", \"esri/widgets/Zoom\", \"esri/geometry/projection\", \"esri/geometry/SpatialReference\"], { css: this.theme.light }).then(\r\n      ([ArcGISMap, MapView, VectorTileLayer, BasemapGallery, Expand, LayerList, FeatureLayer, GroupLayer, Graphic, GraphicsLayer, Legend, geometryEngine, watchUtils, DistanceMeasurement2D, Query, TimeSlider, Zoom, projection, SpatialReference]) => {\r\n        //===============================================================\r\n        // LOCAL COMPONENT\r\n        //===============================================================\r\n        // Table deskripsi pada popup information\r\n        const DescriptionTable = (props) => {\r\n          let [isTrace, setTrace] = useState(false)\r\n\r\n          let data = props.data\r\n\r\n          let detailDescription = []\r\n          for (var key of Object.keys(data)) {\r\n            detailDescription.push(<Descriptions.Item label={key} key={key} >{data[key]}</Descriptions.Item>)\r\n          }\r\n\r\n          // Function to draw spider map from POM to refinery\r\n          let f_traceData = (id, layername, lon, lat) => {\r\n            let url\r\n            if (layername === \"Refinery\") {\r\n              url = `${WsEndPoint}_GetPOMSupplier_?refinery=${id}`\r\n              this.layerPom.visible = true\r\n            } else if (layername === \"POM\") {\r\n              url = `${WsEndPoint}_GetRefinery_?pom=${id}`\r\n              this.layerRefinery.visible = true\r\n            }\r\n\r\n            fetch(url)\r\n              .then(response => response.json())\r\n              .then(resultData => {\r\n                // DRAW LINE\r\n                let lineSymbol = {\r\n                  type: 'simple-line',\r\n                  color: [226, 119, 40],\r\n                  width: 2\r\n                }\r\n\r\n                resultData.map(el => {\r\n                  let spiderLine = {\r\n                    type: \"polyline\",\r\n                    paths: [\r\n                      // [props.position.longitude, props.position.latitude],\r\n                      [lon, lat],\r\n                      [parseFloat(el.X_Coor), parseFloat(el.Y_Coor)]\r\n                    ]\r\n                  }\r\n\r\n                  let spiderLineGraphic = new Graphic({\r\n                    geometry: spiderLine,\r\n                    symbol: lineSymbol\r\n                  })\r\n\r\n                  this.view.graphics.add(spiderLineGraphic)\r\n                })\r\n              })\r\n              .then(() => setTrace(true))\r\n              .catch(error => console.log('error', error));\r\n\r\n          }\r\n\r\n          let f_clearGraphic = () => {\r\n            this.view.graphics.removeAll()\r\n            this.layerRefinery.visible = false\r\n            setTrace(false)\r\n          }\r\n\r\n          let f_button = () => {\r\n            switch (props.title) {\r\n              case \"POM\":\r\n                return isTrace ? <Button type=\"primary\" onClick={f_clearGraphic} danger >Clear</Button> : <Button type=\"primary\" onClick={() => f_traceData(data.pomid, props.title, props.position.longitude, props.position.latitude)} >Trace</Button>\r\n                break\r\n              case \"Refinery\":\r\n                return isTrace == true ? <Button type=\"primary\" onClick={f_clearGraphic} danger >Clear</Button> : <Button type=\"primary\" onClick={() => f_traceData(data.rfid, props.title, props.position.longitude, props.position.latitude)} >Trace</Button>\r\n                break\r\n            }\r\n          }\r\n\r\n          return (\r\n            <React.Fragment>\r\n              <Descriptions title={props.title} style={{ fontSize: '12px' }} bordered column={1} size=\"small\">\r\n                {detailDescription}\r\n              </Descriptions>\r\n              <Divider />\r\n              {f_button()}\r\n            </React.Fragment>\r\n          )\r\n        }\r\n\r\n        // Konten saat Deforestation point di klik\r\n        const DfrsPopupContent = (props) => {\r\n          console.log(\"props\", props)\r\n          this.layerPlantationArea.queryFeatures().then(r => console.log(\"conc area\", r))\r\n          const [inputValue, setInputValue] = useState(0)\r\n          const [pomInside, setPomInside] = useState([])\r\n          const [concInside, setConcInside] = useState([])\r\n          const layerOptions = [\r\n            { label : 'POM', value : this.layerPom, key:\"1\"  },\r\n            { label : 'Reffinery', value : this.layerRefinery, key:\"2\" },\r\n            { label : 'Concession Area', value : this.layerPlantationArea, key:\"3\" },\r\n            { label : 'Peatland', value : this.layerPeat, key:\"4\" },\r\n          ]\r\n\r\n          // let geom = ( this.bufferLayer.graphics.getItemAt(0) !== undefined ) ? this.bufferLayer.graphics.getItemAt(0).geometry : false\r\n\r\n          const updateLayerVisibility = e => {\r\n            e.target.value.visible = e.target.checked\r\n            checkFeatureInside()\r\n          }\r\n\r\n          const onChange = value => { \r\n            setInputValue(value)\r\n            props.onSliderChange(value) \r\n            checkFeatureInside()\r\n          }\r\n\r\n          const checkFeatureInside = () => {\r\n            layerOptions.forEach( (el, i) => {\r\n              let layer = el.value\r\n              //POM SUPPLIER\r\n              if(layer.title == \"POM Supplier\"){\r\n                if(layer.visible){\r\n                  filterFeatureInside(layer).then(\r\n                    result => setPomInside(result.features)\r\n                  )\r\n                }\r\n                else{\r\n                  setPomInside([])\r\n                }\r\n              }\r\n              //KONSESI\r\n              else if(layer.title == \"Oil Palm Area\"){\r\n                if(layer.visible){\r\n                  filterFeatureInside(layer).then(\r\n                    async result => {\r\n                      // CALCULATE AREA\r\n                      let query = this.layerDeforestationArea.createQuery()\r\n                      query.where = `id = '${props.id}'`\r\n                      let dfFeatures = await this.layerDeforestationArea.queryFeatures(query)\r\n                      var concessionResult = await result.features.map(\r\n                        async feature => {\r\n                          let f = feature\r\n                          let area = await calculateArea(feature.geometry, dfFeatures.features[0].geometry)\r\n                          f.area = area.area\r\n                          f.intersectGeometry = area.geometry\r\n                          console.log(\"f\", f)\r\n                          return f\r\n                        }\r\n                      )\r\n\r\n                      Promise.all(concessionResult).then(\r\n                        value => setConcInside(value)\r\n                      )\r\n                    }\r\n                  )\r\n                }\r\n                else{\r\n                  setConcInside([])\r\n                }\r\n              }\r\n            })\r\n          }\r\n\r\n          const calculateArea = (geom1, geom2) => {\r\n            // console.log(\"g1g2\", geom1, geom2)\r\n            return projection.load().then(\r\n              () => {\r\n                let outSpatialReference = new SpatialReference({\r\n                  wkid: 3857 //Sphere_Sinusoidal projection\r\n                });\r\n                let g1 = projection.project(geom1, outSpatialReference)\r\n                let g2 = projection.project(geom2, outSpatialReference)\r\n                let isIntersect = geometryEngine.intersects(g1, g2)\r\n                if(isIntersect){\r\n                  // let intersectArea = geometryEngine.intersect(g1,g2)\r\n                  let intersectArea = geometryEngine.intersect(g2,g1)\r\n                  // let difference = geometryEngine.difference(g2, g1)\r\n                  console.log(\"intersect area\", intersectArea)\r\n                  // var area = geometryEngine.geodesicArea(intersectArea, \"hectares\")\r\n                  var area = { area : geometryEngine.geodesicArea(intersectArea, \"hectares\"), geometry : intersectArea }\r\n                }\r\n                else{\r\n                  var area = ''\r\n                }\r\n                return area\r\n              }\r\n            )\r\n\r\n          }\r\n\r\n          const filterFeatureInside = layer => {\r\n            let geom = ( this.bufferLayer.graphics.getItemAt(0) !== undefined ) ? this.bufferLayer.graphics.getItemAt(0).geometry : false\r\n            // console.log('l', layer)\r\n            let filter = new Query()\r\n            filter.geometry = geom\r\n            filter.spatialRelationship = \"intersects\"\r\n            filter.returnGeometry = true\r\n            // let result = await layer.queryFeatures(filter)\r\n            // return await result\r\n            return layer.queryFeatures(filter)\r\n          }\r\n\r\n          const buttonOnClick = () => {\r\n            let geom = ( this.bufferLayer.graphics.getItemAt(0) !== undefined ) ? this.bufferLayer.graphics.getItemAt(0).geometry : false\r\n            if(geom){\r\n\r\n              // Query untuk mencari area yang berintersect dengan area buffer\r\n              const query = new Query()\r\n              query.geometry = geom\r\n              query.spatialRelationship = \"intersects\"\r\n              query.returnGeometry = true\r\n              query.outFields = \"*\"\r\n              query.outSpatialReference = { wkid: 4326 };\r\n\r\n              // Query unntuk menyeleksi area deforestasi berdasarkan ID point\r\n              const query2 = new Query\r\n              query2.outFields = \"*\"\r\n              query2.returnGeometry = true\r\n              query2.where = `id = '${props.id}'`\r\n\r\n              const queryHotspot = new Query\r\n              queryHotspot.outFields = \"*\"\r\n              queryHotspot.geometry = geom\r\n              queryHotspot.returnGeometry = true\r\n              queryHotspot.spatialRelationship = \"intersects\"\r\n              queryHotspot.where = `Acq_Date between date'${moment( props.attributes.start_date ).format(\"YYYY-MM-DD\")}' and '${ moment(props.attributes.end_date).format(\"YYYY-MM-DD\")}'`\r\n\r\n              // Setelah berhasil di query hasil akan dikirim ke modal, untuk dianalisis apakah di geometry tersebut terdapat POI yang terimpact\r\n              this.layerDeforestationArea.queryFeatures(query2).then(\r\n                result => { \r\n                  this.setState({\r\n                    dfrsAreaGeom : result.features[0].geometry\r\n                  })\r\n                }\r\n              )\r\n              \r\n              // Mengaktifkan loading spinner\r\n              this.setState({ isLoading : true })\r\n\r\n              // Mengeksekusi Query sebelum dikirim ke Modal data2 apa saja yang terindikasi bersinggungan dengan area buffer yaitu layer pom, area plantation dan peat\r\n              Promise.all([this.layerPom.queryFeatures(query), this.layerPlantationArea.queryFeatures(query), this.layerPeat.queryFeatures(query), this.layerHotspot.queryFeatures(queryHotspot) ])\r\n                .then(result => {\r\n                  let featureSet = result.map( featureSet => featureSet.features )\r\n                  console.log(\"fs\", featureSet)\r\n                  this.setState({ modalData : featureSet})\r\n                })\r\n                // Menonaktifkan spinner dan menampilkan modal\r\n                .then( () => this.setState({showModal : true, isLoading : false}) )\r\n\r\n            }\r\n          }\r\n\r\n          const zoomToFeature = (geom, record ) => {\r\n            console.log(\"record\", record)\r\n            this.view.goTo({\r\n              target : geom,\r\n              tilt : 70\r\n            })\r\n          }\r\n\r\n          const zoomToIntersect = (geom) => {\r\n            this.layerIntersectPolygon.removeAll()\r\n            var simpleFillSymbol = {\r\n              type: \"simple-fill\",\r\n              color: [227, 139, 79, 0.8],  // orange, opacity 80%\r\n              outline: {\r\n                color: [255, 255, 255],\r\n                width: 1\r\n              }\r\n            };\r\n\r\n            let polygonGraphic = new Graphic({\r\n              geometry : geom,\r\n              symbol : simpleFillSymbol\r\n            })\r\n\r\n            this.layerIntersectPolygon.add(polygonGraphic)\r\n\r\n            this.view.goTo({\r\n              target : geom,\r\n              tilt : 70\r\n            })\r\n\r\n          }\r\n\r\n          const createList = (data, title) => {\r\n            console.log(\"data\", data)\r\n\r\n            // COLUMN FOR POM\r\n            const columns = [\r\n              {\r\n                title: 'Name',\r\n                dataIndex: 'name',\r\n                key: 'name',\r\n                render: text => <a>{text}</a>,\r\n              },\r\n              {\r\n                title: 'Action',\r\n                dataIndex: 'action',\r\n                key: 'action',\r\n                render : (geom, record) => {\r\n                  console.log(\"re\", record)\r\n                  return <Button onClick={() => zoomToFeature(geom.geometry, record) } >go to</Button>\r\n                }\r\n              },\r\n            ]\r\n\r\n            // COLUMN FOR CONCESSION\r\n            const concessionColumn =  [\r\n              {\r\n                title: 'Names',\r\n                dataIndex: 'name',\r\n                key: 'name',\r\n                render: text => <a>{text}</a>,\r\n              },\r\n              {\r\n                title: 'Impacted Area',\r\n                dataIndex: 'area',\r\n                key: 'area',\r\n                render : area => isNaN(parseFloat(area).toFixed(3)) ? null : <span style={{color : 'red'}}>{parseFloat(area).toFixed(3)} Ha</span>\r\n              },\r\n              {\r\n                title: 'Action',\r\n                dataIndex: 'action',\r\n                key: 'action',\r\n                render : (geom, record) => {\r\n                  // console.log(\"re\", record)\r\n                  // return <Button onClick={() => zoomToFeature(geom.geometry, record) } >go to</Button>\r\n                  if( record.area === undefined ){\r\n                    return <Button onClick={() => zoomToFeature(geom.geometry, record) } >go to</Button>\r\n                  }\r\n                  else{\r\n                    return <Space>\r\n                      <Button onClick={() => zoomToFeature(geom.geometry, record) } >go to</Button>\r\n                      <Button onClick={() => zoomToIntersect (geom.intersectGeometry) } >impacted</Button>\r\n                    </Space>\r\n                  }\r\n                }\r\n              },\r\n            ]\r\n\r\n            const mapingField = {\r\n              \"POM\" : \"PomName\",\r\n              \"Concession\" : \"Name\",\r\n            }\r\n\r\n            function chooseColumn(){\r\n              if(title==\"POM\"){ return columns}\r\n              else if(title == \"Concession\"){ return concessionColumn}\r\n            }\r\n\r\n            if(data.length > 0){\r\n              console.log(data)\r\n              let tableData = data.map(el => { return { name : el.attributes[ mapingField[title] ], action : el, area : el.area, intersectGeometry : el.intersectGeometry } })\r\n              return(\r\n                <>\r\n                  <h1>{title}</h1>\r\n                  {\r\n                    <div style={{padding : '10px'}}>\r\n                      <Table columns={chooseColumn()} dataSource={tableData} size=\"small\" />\r\n                    </div>\r\n                  }\r\n                  <Divider />\r\n                </>\r\n              ) \r\n            }\r\n            else{\r\n              return null\r\n            }\r\n          }\r\n\r\n          const findIntersection = (searchPolygon, graphics) => {\r\n            return graphics.filter(graphic => geometryEngine.intersects(graphic.geometry, searchPolygon))\r\n          }\r\n\r\n          return(\r\n            <>\r\n            <Descriptions title=\"Detail\" column={1} bordered>\r\n              <Descriptions.Item label=\"Start\">{moment(props.attributes.start_date).format(\"DD/MM/YYYY\")}</Descriptions.Item>\r\n              <Descriptions.Item label=\"End\">{moment(props.attributes.end_date).format(\"DD/MM/YYYY\")}</Descriptions.Item>\r\n              <Descriptions.Item label=\"Total Area\">{props.attributes.total} ha</Descriptions.Item>\r\n            </Descriptions>\r\n              <Divider />\r\n              <h4>Buffer Radius in Kilometers</h4>\r\n              <div style={{position : 'relative'}}>\r\n                <Row>\r\n                  <Col span={17} >\r\n                    <Slider defaultValue={inputValue} max={50} value = { typeof inputValue ==='number'? inputValue : 0 }tooltipPlacement=\"bottom\" onChange={ onChange } />\r\n                  </Col>\r\n                  <Col span={2}>\r\n                    <InputNumber min={0} max={50} style={{ margin: '0 16px' }} value={inputValue} onChange={onChange} />\r\n                  </Col>\r\n                </Row>\r\n              \r\n              <Divider />\r\n              <h4>Show or hide layer</h4>\r\n              {\r\n                layerOptions.map( opt => <Checkbox key={opt.key} value={opt.value} onChange={updateLayerVisibility} checked={opt['value'].visible } >{ opt.label }</Checkbox>)\r\n              }\r\n              <Divider />\r\n              { createList(pomInside, \"POM\") }\r\n              { createList(concInside, \"Concession\") }\r\n              </div>\r\n              <div style={{position : 'sticky', bottom : '0px'}}>\r\n                <Space>\r\n                  <Button type=\"primary\" onClick={ buttonOnClick }>Show List</Button>\r\n                  {/* <Button type=\"primary\" onClick={()=>this.setState({showModal : true})} >Export to PDF</Button> */}\r\n                </Space>\r\n              </div>\r\n            </>\r\n          )\r\n        }\r\n\r\n        //===============================================================\r\n        // BASE FUNCTION\r\n        //===============================================================\r\n        // Fungsi untuk menggambar buffer\r\n        const updateBufferGraphic = ( geometry,size ) => {\r\n          let polySym = {\r\n            type: \"simple-fill\", // autocasts as new SimpleFillSymbol()\r\n            color: [140, 140, 222, 0.5],\r\n            outline: {\r\n              color: [0, 0, 0, 0.5],\r\n              width: 2\r\n            }\r\n          };\r\n          if (size > 0){\r\n            var bufferGeometry = geometryEngine.geodesicBuffer( geometry, size, \"kilometers\")\r\n            if(this.bufferLayer.graphics.length === 0){\r\n              this.bufferLayer.add(\r\n                new Graphic({\r\n                  geometry : bufferGeometry,\r\n                  symbol : polySym\r\n                })\r\n              )\r\n            } else {\r\n              this.bufferLayer.graphics.getItemAt(0).geometry = bufferGeometry\r\n            }\r\n          } else{\r\n            this.bufferLayer.removeAll()\r\n          }\r\n        }\r\n\r\n        // Generate isi dari popup\r\n        const generateContent = (target, title) => {\r\n          console.log(target, title)\r\n          \r\n          let popupDiv = document.createElement('div')\r\n\r\n          if(title === \"POM\"){\r\n            pomPopupTemplate.content = popupDiv\r\n            ReactDOM.render(<DescriptionTable data={target.graphic.attributes} title={title} position={{ latitude: target.graphic.geometry.latitude, longitude: target.graphic.geometry.longitude }} />, popupDiv)\r\n          } \r\n          else if (title === \"Deforestation Point\" || title === \"Deforestation Area\"){\r\n            dpPopupTemplate.content = popupDiv\r\n\r\n            //// IF value on slider are changing, the buffer size will be automatic adjusting to that value\r\n            const onSliderChange = (bufferSize) => {\r\n\r\n              //// Buffer is calculated from centered point\r\n              // let pointGeometry = target.graphic.geometry\r\n              let pointGeometry = target.graphic.geometry\r\n              console.log(\"point Geometry\", pointGeometry)\r\n              this.setState({\r\n                dfrsPointGeom : pointGeometry\r\n              })\r\n              updateBufferGraphic(pointGeometry, bufferSize)\r\n            }\r\n\r\n            const onCheckboxChange = layerList => {\r\n              layerList.map( layer => {\r\n                layer.visible = true\r\n              })\r\n            }\r\n\r\n            ReactDOM.render(<DfrsPopupContent id={target.graphic.attributes.id} onSliderChange={onSliderChange} attributes={ target.graphic.attributes } />, popupDiv)\r\n          }\r\n          else{\r\n            pomPopupTemplate.content = popupDiv\r\n            ReactDOM.render(<DescriptionTable data={target.graphic.attributes} title={title} position={{ latitude: target.graphic.geometry.latitude, longitude: target.graphic.geometry.longitude }} />, popupDiv)\r\n          }\r\n\r\n          return popupDiv\r\n        }\r\n\r\n        //===============================================================\r\n        // DOM\r\n        //===============================================================\r\n        // document.getElementById(\"button-form-deforestation\").addEventListener('click', function(e){\r\n        //   console.log(e)\r\n        // })\r\n\r\n        //===============================================================\r\n        // MAP INIT\r\n        //===============================================================\r\n        this.map = new ArcGISMap({\r\n          basemap: 'streets-night-vector'\r\n        });\r\n\r\n        //===============================================================\r\n        // VIEW INIT\r\n        //===============================================================\r\n        this.view = new MapView({\r\n          container: this.mapRef.current,\r\n          map: this.map,\r\n          center: [118, 0],\r\n          zoom: 4,\r\n          popup: {\r\n            dockEnabled: true,\r\n            dockOptions: {\r\n              // Disables the dock button from the popup\r\n              buttonEnabled: false,\r\n              // Ignore the default sizes that trigger responsive docking\r\n              breakpoint: false,\r\n              position : 'top-left'\r\n            }\r\n          }\r\n        });\r\n\r\n        // this.view.when(\r\n        //   () => {\r\n        //     console.log(\"sukses\", this.view) },\r\n        //   function(err){console.log(err)}\r\n        // )\r\n\r\n        //==============================================================\r\n        // LAYER\r\n        //==============================================================\r\n        \r\n        // GROUP PLANTATION\r\n        //\r\n        this.layerPlantationPoint = new FeatureLayer({\r\n          // url: \"https://idjktsvr10.wil.local/arcgis/rest/services/NewGISInteractiveMap/Third_Party_Supplier/MapServer/0\",\r\n          url: \"https://idjktsvr10.wil.local/arcgis/rest/services/NewGISInteractiveMap/OilPalm_Plantation_TP_Supplier/MapServer/0\",\r\n          title: \"Oil Palm Plantation\",\r\n          visible: false,\r\n          outFields : ['*']\r\n        });\r\n\r\n        this.layerPlantationArea = new FeatureLayer({\r\n          url: \"https://idjktsvr10.wil.local/arcgis/rest/services/NewGISInteractiveMap/Third_Party_Supplier/MapServer/2\",\r\n          title: \"Oil Palm Area\",\r\n          visible: false,\r\n          outFields : ['*']\r\n        });\r\n\r\n        this.layerPeat = new FeatureLayer({\r\n          url : \"https://idjktsvr10.wil.local/arcgis/rest/services/NewGISInteractiveMap/Layer_Fungsi_Ekosistem_Gambut_201907_sde/MapServer/0\",\r\n          title : \"Peat Ecosystem\",\r\n          visible : false,\r\n          outFields : ['*']\r\n        })\r\n        \r\n        // GROUP INDUSTRIES\r\n        //\r\n        this.layerPkCrushing = new FeatureLayer({\r\n          url: \"https://idjktsvr10.wil.local/arcgis/rest/services/industries_MIL1/MapServer/0\",\r\n          title: \"3rd PK Crushing\",\r\n          visible: false\r\n        });\r\n\r\n        this.layerRefinery = new FeatureLayer({\r\n          url: \"https://idjktsvr10.wil.local/arcgis/rest/services/NewGISInteractiveMap/Layer_Refinery_201908_sde/MapServer/0\",\r\n          title: \"Refinery\",\r\n          visible: false,\r\n          popupEnabled: true,\r\n          outFields: ['*']\r\n        });\r\n\r\n        this.layerPom = new FeatureLayer({\r\n          // url: \"https://idjktsvr10.wil.local/arcgis/rest/services/NewGISInteractiveMap/Third_Party_Supplier/MapServer/1\",\r\n          // url: \"https://gisportal.wilmar.co.id/arcgisserver/rest/services/NewGISInteractiveMap_2/POM/MapServer/1\",\r\n          url: \"https://idjktsvr10.wil.local/arcgis/rest/services/NewGISInteractiveMap/Third_Party_Supplier_2020/MapServer/1\",\r\n          title: \"3rd Party Mill\",\r\n          visible: false,\r\n          popupEnabled: true,\r\n          outFields: ['pomid', 'PomName', 'CompanyNam', 'PlaceName', 'Tankcap', 'Silocap']\r\n        });\r\n        // this.layerPom = importedLayer.layerPom\r\n\r\n        // GROUP DEFORESTATION\r\n        //\r\n        this.layerDeforestationPoint = new FeatureLayer({\r\n          url : \"https://idjktsvr10.wil.local/arcgis/rest/services/NewGISInteractiveMap/Deforestation/MapServer/0\",\r\n          title : \"Deforestation Point\",\r\n          visible : false,\r\n          popupEnabled: true,\r\n          outFields : ['*']\r\n        });\r\n        this.map.add(this.layerDeforestationPoint)\r\n\r\n        this.layerDeforestationArea = new FeatureLayer({\r\n          // url : \"https://idjktsvr10.wil.local/arcgis/rest/services/NewGISInteractiveMap/Deforestation/MapServer/1\",\r\n          // url : \"https://gisportal.wilmar.co.id/arcgisserver/rest/services/third_party/deforestation_builder/MapServer/0\",\r\n          url : \"https://gisportal.wilmar.co.id/arcgisserver/rest/services/third_party/idn11def3_period/MapServer/0\",\r\n          title : \"Deforestation Area\",\r\n          visible : false,\r\n          outFields : ['*']\r\n        });\r\n\r\n        // Basemap WILMAR\r\n        //\r\n        var basemapWilmar = new VectorTileLayer({\r\n          url: 'https://gisportal.wilmar.co.id/arcgisserver/rest/services/Hosted/Wilmar_Basemap2/VectorTileServer?f=pjson'\r\n        });\r\n\r\n        // HOTSPOT\r\n        this.layerHotspot = new FeatureLayer({\r\n          url : \"https://idjktsvr10.wil.local/arcgis/rest/services/NewGISInteractiveMap/Hotspot_HSP1/MapServer/0\",\r\n          title : \"Hotspot\",\r\n          visible : false,\r\n          outFields : ['*']\r\n        })\r\n        this.map.add(this.layerHotspot)\r\n\r\n        // SKETCH LAYER\r\n        //\r\n        this.sketchLayer = new GraphicsLayer({\r\n          listMode : \"hide\"\r\n        })\r\n        this.bufferLayer = new GraphicsLayer({\r\n          listMode : \"hide\"\r\n        })\r\n        this.map.addMany([this.sketchLayer, this.bufferLayer])\r\n\r\n        // LAYER GROUPING\r\n        //\r\n        var glIndustries = new GroupLayer({\r\n          title: \"Wilmar Third Party\"\r\n        });\r\n\r\n        var glPlantation = new GroupLayer({\r\n          title : \"Plantation\"\r\n        });\r\n\r\n        var glDeforestation = new GroupLayer({\r\n          title : \"Deforestation\"\r\n        })\r\n\r\n        var glLandIssue = new GroupLayer({\r\n          title : \"Land Issue\"\r\n        })\r\n\r\n        glIndustries.addMany([ this.layerRefinery, this.layerPom, this.layerPkCrushing, this.layerPlantationArea, this.layerPlantationPoint, ]);\r\n        // glPlantation.addMany([ this.layerPlantationArea, this.layerPlantationPoint, ])\r\n        glDeforestation.addMany([ this.layerDeforestationArea, this.layerDeforestationPoint,  ])\r\n        glLandIssue.addMany([this.layerPeat])\r\n        this.map.addMany([ glIndustries, glDeforestation, glLandIssue]);\r\n\r\n        //// LAYER INTERSECT POLYGON\r\n        this.layerIntersectPolygon = new GraphicsLayer({\r\n          title : \"intersected\"\r\n        })\r\n        this.map.add(this.layerIntersectPolygon)\r\n\r\n        //=================================================================\r\n        // WIDGET\r\n        //=================================================================\r\n        \r\n        // ZOOM\r\n        var zoomWidget = new Zoom({\r\n          view : this.view\r\n        })\r\n        this.view.ui.components = []\r\n        this.view.ui.add(zoomWidget, \"top-right\");\r\n\r\n        // this.view.whenLayerView(this.layerPom).then((lv)=> console.log(\"lv\",lv))\r\n        // BASEMAP GALERY\r\n        //\r\n        var basemapGallery = new BasemapGallery({\r\n          view: this.view\r\n        });\r\n        var expand = new Expand({\r\n          view: this.view,\r\n          content: basemapGallery,\r\n          expandTooltip: 'Change Basemap'\r\n        });\r\n        this.view.ui.add(expand, \"top-right\");\r\n\r\n        // LAYERLIST\r\n        //\r\n        var layerList = new LayerList({\r\n          view: this.view,\r\n        })\r\n        var expandLayerList = new Expand({\r\n          view: this.view,\r\n          content: layerList,\r\n          expandTooltip: 'Layer List'\r\n        })\r\n        this.view.ui.add(expandLayerList, \"top-right\")\r\n\r\n        // LEGEND\r\n        //\r\n        var legend = new Legend({\r\n          view : this.view,\r\n        })\r\n        this.view.ui.add(legend, \"bottom-right\")\r\n\r\n        //\r\n        //// TIMESLIDER\r\n        //\r\n        const timeSlider = new TimeSlider({\r\n          container: \"timeSlider\",\r\n          playRate: 50,\r\n          stops: {\r\n            interval: {\r\n              value: 1,\r\n              unit: \"hours\"\r\n            }\r\n          }\r\n        });\r\n        // this.view.ui.add(timeSlider, \"manual\");\r\n\r\n        //=================================================================\r\n        //POPUP SET\r\n        //=================================================================\r\n        let pomPopupTemplate = {\r\n          title: 'POM Suplier',\r\n          content: (target) => generateContent(target, \"POM\")\r\n        }\r\n        this.layerPom.popupTemplate = pomPopupTemplate\r\n\r\n        let refineryPopupTemplate = {\r\n          title: 'Refinery',\r\n          content: (target) => generateContent(target, \"Refinery\")\r\n        }\r\n        this.layerRefinery.popupTemplate = refineryPopupTemplate\r\n\r\n        let concAreaTemplate = {\r\n          title : \"Concession Area\",\r\n          content : target => generateContent(target, \"Concession Area\")\r\n        }\r\n        this.layerPlantationArea.popupTemplate = concAreaTemplate\r\n\r\n        let hsTemplate = {\r\n          title : \"Hotspot\",\r\n          content : target => generateContent(target, \"Hotspot\")\r\n        }\r\n        this.layerHotspot.popupTemplate = hsTemplate\r\n\r\n        let dpPopupTemplate = {\r\n          title : 'Deforestation Point',\r\n          content : target => generateContent(target, \"Deforestation Point\")\r\n        }\r\n        this.layerDeforestationPoint.popupTemplate = dpPopupTemplate \r\n\r\n        let daPopupTemplate = {\r\n          title : 'Deforestation Area',\r\n          content : target => generateContent(target, \"Deforestation Area\")\r\n        }\r\n        this.layerDeforestationArea.popupTemplate = daPopupTemplate\r\n\r\n        //==================================================================\r\n        // EVENT\r\n        //==================================================================\r\n        this.view.when(\r\n          () => this.view.whenLayerView(this.layerIntersectPolygon)\r\n            .then(\r\n              layerview1 => {\r\n                this.view.on(\"pointer-move\", evt => {\r\n                  if( this.layerIntersectPolygon.graphics.getItemAt(0) !== undefined ){\r\n                    var screenPoint = { x : evt.x, y : evt.y }\r\n                    this.view.hitTest(screenPoint).then( response => {\r\n                      response.results.forEach( el => {\r\n                        if (el.graphic.layer.title == 'intersected'){\r\n                          console.log(\"elelee\", el)\r\n                        }\r\n                      })\r\n                    })\r\n                  }\r\n                })\r\n              }\r\n            )\r\n        )\r\n\r\n        watchUtils.whenTrue(this.view, \"stationary\", () => {\r\n          if(this.view.zoom >= 10){\r\n            console.log(this.view.zoom)\r\n            this.layerDeforestationArea.visible = this.layerDeforestationPoint.visible ? true : false \r\n          }\r\n          else{\r\n            this.layerDeforestationArea.visible = false\r\n          }\r\n        })\r\n      });\r\n\r\n\r\n  }\r\n\r\n  componentDidUpdate(){\r\n    // console.log(this.context)\r\n    // this.layerPlantationPoint.visible = true\r\n  }\r\n\r\n  componentWillMount() {\r\n    if (this.view) {\r\n      this.view.container = null\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let dfrsContent\r\n    if(this.state.dfrsResult == null){\r\n      dfrsContent = <Result title=\"Please choose date range\" />\r\n    }\r\n    else if(this.state.dfrsResult.length == 0){\r\n      dfrsContent = <Empty />\r\n    } \r\n    else {\r\n      let content = []\r\n      const impactedId = ['IDN_w0tv4g7_20200908', 'IDN_w0tv675_20200908', 'IDN_w0tv5sw_20200908', 'IDN_w0sxfr1_20200901', '\tIDN_w0u8138_20200906']\r\n      this.state.dfrsResult.map( (features, index) => {\r\n\r\n        let obj = {\r\n          key : index,\r\n          lat : features.attributes.POINT_X,\r\n          lon : features.attributes.POINT_Y,\r\n          startdate : features.attributes.start_date,\r\n          enddate : features.attributes.end_date,\r\n          peatland : features.attributes.peatland,\r\n          mangrove : features.attributes.mangrove,\r\n          other : features.attributes.other,\r\n          total : features.attributes.total,\r\n          konsesi : parseFloat( features.attributes.SUM_konses / 1000 ).toFixed(2),\r\n          peat : parseFloat( features.attributes.SUM_peat_ / 1000).toFixed(2),\r\n          // zoomTo : ()=>this.f_zoomTo(features.attributes.POINT_Y, features.attributes.POINT_X, features),\r\n          zoomTo : ()=>this.f_zoomTo(features),\r\n          // impacted : impactedId.includes(features.attributes.id) ? true : false\r\n          impacted : features.attributes.SUM_konses !== 0 ? true : false\r\n        }\r\n\r\n        // let sorter = impactedId.includes(features.attributes.id) ? 1 : 0\r\n        let sorter =features.attributes.SUM_konses !== 0 ? 1 : 0\r\n        content.push({sorter : sorter, data : obj})\r\n\r\n      })\r\n\r\n      let c = _.orderBy(content, ['sorter'], ['desc'])\r\n      console.log(c)\r\n      let d = _.map(c, function(el, i){\r\n        let dat = {...el.data, index : i + 1}\r\n\r\n        return <DfrsCard key={dat.key} lat={dat.lat} lon={dat.lon} startdate={dat.startdate} enddate={dat.enddate} peatland={dat.peatland} mangrove={dat.mangrove} konsesi={dat.konsesi} peat={dat.peat} other={dat.other} total={dat.total} index={dat.index} zoomTo={dat.zoomTo} impacted={dat.impacted} />\r\n      })\r\n\r\n        dfrsContent = <Space direction=\"vertical\">{d}</Space>\r\n    }\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <div className=\"webmap\" ref={this.mapRef} />\r\n        <div className=\"spinner\">\r\n          <Spin spinning={this.state.isLoading} size=\"large\" tip=\"Loading...\" />\r\n        </div>\r\n        {/* <div id=\"timeSlider\"></div> */}\r\n        <ButtonNotif onClick={ ()=>this.f_showDrawer(true) } count={4} />\r\n        <ButtonClear onClick={ this.f_clearBufferLayers }  />\r\n        <ButtonFire className=\"button-hotspot\" onClick={ () => this.layerHotspot.visible = ! this.layerHotspot.visible } />\r\n        <Drawer\r\n          title=\"Deforestation\"\r\n          placement=\"right\"\r\n          closable={true}\r\n          onClose={ () => this.f_showDrawer(false) }\r\n          visible={this.state.isDrawerShow}\r\n          width={500}\r\n        >\r\n          <DeforestationForm timesRange={this.f_getDatesRange(moment(\"20190215\"), moment())} onFinish={this.f_dfrsFormOnFinish} onClear={this.f_onClear} />\r\n          <Divider />\r\n          {\r\n            this.state.dfrsResult.length > 0 ? <Button onClick={this.f_downloadPdf} block>Download PDF</Button> : null\r\n          }\r\n          <Divider />\r\n          <div style={{display : 'flex', flexDirection : 'column', justifyContent : 'space-between'}}>\r\n            {dfrsContent}\r\n          </div>\r\n        </Drawer>\r\n        <Modal\r\n          title=\"Detail\"\r\n          visible={this.state.showModal}\r\n          onOk={(e)=>this.setState({showModal : false})}\r\n          onCancel={(e)=>this.setState({showModal : false})}\r\n          width=\"80vw\"\r\n          destroyOnClose={true}\r\n        >\r\n          <ModalContent data={this.state.modalData} location={this.state.dfrsPointGeom} dfrsArea={this.state.dfrsAreaGeom} />\r\n        </Modal>\r\n\r\n      </React.Fragment>\r\n    )\r\n  }\r\n}\r\n\r\nexport default MapApp","import { loadModules } from 'esri-loader'\r\n\r\nexport default loadModules(['esri/Map', 'esri/views/MapView', 'esri/layers/VectorTileLayer', 'esri/widgets/BasemapGallery', 'esri/widgets/Expand', \"esri/widgets/LayerList\", \"esri/layers/FeatureLayer\", \"esri/layers/GroupLayer\", \"esri/Graphic\", \"esri/layers/GraphicsLayer\", \"esri/widgets/Legend\", \"esri/geometry/geometryEngine\", \"esri/core/watchUtils\", \"esri/widgets/DistanceMeasurement2D\", \"esri/tasks/support/Query\", \"esri/widgets/TimeSlider\", \"esri/widgets/Zoom\", \"esri/geometry/projection\", \"esri/geometry/SpatialReference\"], { css: true }).then(\r\n  ([ArcGISMap, MapView, VectorTileLayer, BasemapGallery, Expand, LayerList, FeatureLayer, GroupLayer, Graphic, GraphicsLayer, Legend, geometryEngine, watchUtils, DistanceMeasurement2D, Query, TimeSlider, Zoom, projection, SpatialReference]) => {\r\n    return [ArcGISMap, MapView, VectorTileLayer, BasemapGallery, Expand, LayerList, FeatureLayer, GroupLayer, Graphic, GraphicsLayer, Legend, geometryEngine, watchUtils, DistanceMeasurement2D, Query, TimeSlider, Zoom, projection, SpatialReference]\r\n  })\r\n\r\n\r\n\r\n\r\n\r\n// export await [ArcGISMap, MapView, VectorTileLayer, BasemapGallery, Expand, LayerList, FeatureLayer, GroupLayer, Graphic, GraphicsLayer, Legend, geometryEngine, watchUtils, DistanceMeasurement2D, Query, TimeSlider, Zoom, projection, SpatialReference]\r\n\r\n// .then(\r\n//   ([ArcGISMap, MapView, VectorTileLayer, BasemapGallery, Expand, LayerList, FeatureLayer, GroupLayer, Graphic, GraphicsLayer, Legend, geometryEngine, watchUtils, DistanceMeasurement2D, Query, TimeSlider, Zoom, projection, SpatialReference]) => {","import React from 'react'\r\nimport {Statistic} from 'antd'\r\n\r\nconst TotalTitle = (props) => {\r\n  return(\r\n    // <Statistic value={props.value} valueStyle={{fontSize : '15vh'}} />\r\n    <Statistic value={props.value} />\r\n  )\r\n}\r\n\r\nexport default TotalTitle","import React, { PureComponent } from 'react';\r\nimport {\r\n  PieChart, Pie, Legend, Tooltip, Cell\r\n} from 'recharts';\r\n\r\nconst data01 = [\r\n  { name: 'Have Plantation', value: 310 }, { name: 'Not have Plantation', value: 190 },\r\n];\r\n\r\nconst COLORS = ['#0088FE', '#00C49F', '#FFBB28', '#FF8042']\r\n\r\nexport default class Example extends PureComponent {\r\n  static jsfiddleUrl = 'https://jsfiddle.net/alidingling/k9jkog04/';\r\n\r\n  render() {\r\n    return (\r\n      <>\r\n      <PieChart width={400} height={400}>\r\n        <Pie dataKey=\"value\" isAnimationActive={false} data={data01} cx={200} cy={200} outerRadius={100} fill=\"#8884d8\" innerRadius={60} label >\r\n          {\r\n          \tdata01.map((entry, index) => <Cell fill={COLORS[index % COLORS.length]}/>)\r\n          }\r\n        </Pie>\r\n        <Tooltip />\r\n      </PieChart>\r\n    </>\r\n    );\r\n  }\r\n}\r\n","import React, { PureComponent } from 'react';\r\nimport {\r\n  PieChart, Pie, Legend, Tooltip, Cell\r\n} from 'recharts';\r\n\r\nconst data01 = [\r\n  { name: 'Peat Area', value: 290 }, { name: 'Peat Loss', value: 10 },\r\n];\r\n\r\nconst COLORS = ['#FFBB28', '#FF8042']\r\n\r\nexport default class Example extends PureComponent {\r\n  static jsfiddleUrl = 'https://jsfiddle.net/alidingling/k9jkog04/';\r\n\r\n  render() {\r\n    return (\r\n      <>\r\n      <PieChart width={400} height={400}>\r\n        <Pie dataKey=\"value\" isAnimationActive={false} data={data01} cx={200} cy={200} outerRadius={100} fill=\"#8884d8\" innerRadius={60} label >\r\n          {\r\n          \tdata01.map((entry, index) => <Cell fill={COLORS[index % COLORS.length]}/>)\r\n          }\r\n        </Pie>\r\n        <Tooltip />\r\n      </PieChart>\r\n    </>\r\n    );\r\n  }\r\n}\r\n","import React, { PureComponent } from 'react';\r\nimport {\r\n  AreaChart, Area, XAxis, YAxis, CartesianGrid, Tooltip,\r\n} from 'recharts';\r\n\r\nconst data = [\r\n  {\r\n    name: 'Jan', area: 1.2,\r\n  },\r\n  {\r\n    name: 'Feb', area: 2.2,\r\n  },\r\n  {\r\n    name: 'Mar', area: 3.2,\r\n  },\r\n  {\r\n    name: 'Apr', area: 2.9,\r\n  },\r\n  {\r\n    name: 'May', area: 2.2,\r\n  },\r\n  {\r\n    name: 'June', area: 1.9,\r\n  },\r\n  {\r\n    name: 'Jul', area: 2.0,\r\n  },\r\n  {\r\n    name: 'Aug', area: 0.5,\r\n  },\r\n  {\r\n    name: 'Sep', area: 0.6,\r\n  },\r\n  {\r\n    name: 'Oct', area: 0.2,\r\n  },\r\n  {\r\n    name: 'Nov', area: 1.1,\r\n  },\r\n  {\r\n    name: 'Dec', area: 1.3,\r\n  },\r\n];\r\n\r\nexport default class AreaCharts extends PureComponent {\r\n  static jsfiddleUrl = 'https://jsfiddle.net/alidingling/Lrffmzfc/';\r\n\r\n  render() {\r\n    return (\r\n      <>\r\n      {/* <span className=\"title\" >Deforestation by Month</span> */}\r\n      <AreaChart\r\n        width={900}\r\n        height={100}\r\n        data={data}\r\n        margin={{\r\n          top: 20, left: 20, bottom: 20, right : 20\r\n        }}\r\n      >\r\n        <CartesianGrid strokeDasharray=\"3 3\" />\r\n        <XAxis dataKey=\"name\" />\r\n        <YAxis />\r\n        <Tooltip />\r\n        <Area type=\"monotone\" dataKey=\"area\" stroke=\"#8884d8\" fill=\"#8884d8\" />\r\n      </AreaChart>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\n","import React from 'react'\r\nimport {Row, Col, Card, Space} from 'antd'\r\nimport TotalTitle from '../Components/Charts/TotalTitle'\r\nimport DoughnoutCharts from '../Components/Charts/DoughnoutCharts' \r\nimport PeatCharts from '../Components/Charts/PeatCharts' \r\nimport AreaCharts from '../Components/Charts/AreaCharts' \r\n\r\nclass Dashboard extends React.Component{\r\n  render(){\r\n    return(\r\n      <div className=\"dashboard-wrapper\">\r\n        <Row>\r\n          <Col span={8}>\r\n            <div style={{height : '45vh'}}>\r\n                <Card title=\"Total Cover Loss(Ha)\" style={{height : '50%'}}>\r\n                  <TotalTitle value={12000} />\r\n                </Card>\r\n                <Card title=\"Total Cover Loss(Ha)\" style={{height : '50%'}}>\r\n                  <TotalTitle value={12000} />\r\n                </Card>\r\n            </div>\r\n          </Col>\r\n          <Col span={16}>\r\n            <div style={{height : '45vh'}}>\r\n              <Card title = \"Deforestation by Month\" style={{height : '100%'}}>\r\n                <AreaCharts />\r\n              </Card>\r\n            </div>\r\n          </Col>\r\n        </Row>\r\n        <Row style={{height : '45vh'}}>\r\n          <Col span={8}>\r\n            <div style={{maxHeight : '45vh'}}>\r\n              <Card title=\"Concession Ratio\" style={{height : '100%'}} >\r\n                <DoughnoutCharts />\r\n              </Card>\r\n            </div>\r\n          </Col>\r\n          <Col span={8}>\r\n            <div style={{maxHeight : '50vh'}}>\r\n              <Card title=\"Concession Ratio\" style={{height : '100%'}} >\r\n                <DoughnoutCharts />\r\n              </Card>\r\n            </div>\r\n          </Col>\r\n          <Col span={8}>\r\n            <div style={{maxHeight : '50vh'}}>\r\n              <Card title=\"Concession Ratio\" style={{height : '100%'}} >\r\n                <DoughnoutCharts />\r\n              </Card>\r\n            </div>\r\n          </Col>\r\n\r\n        </Row>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Dashboard","import React from 'react';\r\nimport ButtonNotif from './Components/ButtonNotif';\r\nimport Sidebar from './Containers/Sidebar'\r\nimport MapApp from './Containers/MapApp'\r\nimport Dashboard from './Containers/Dashboard'\r\nimport { ContextProvider, Consumer } from './Config/context'\r\nimport { Layout } from 'antd';\r\nimport './App.css';\r\n\r\nconst { Content } = Layout\r\n\r\nfunction App() {\r\n  return (\r\n    <ContextProvider>\r\n      <Layout style={{ minHeight: '100vh' }}>\r\n        <Sidebar />\r\n        <Layout className=\"site-layout\">\r\n          <Content style={{ margin: '0 0px' }}>\r\n            <div className=\"site-layout-background\" style={{ minHeight: '100vh' }}>\r\n              <Consumer>\r\n                {\r\n                  context => {\r\n                    if(context.activePage == 'dashboard') {\r\n                      return <Dashboard />\r\n                    } \r\n                    else if(context.activePage == 'map') {\r\n                      return <MapApp />\r\n                    }\r\n                  }\r\n                }\r\n              </Consumer>\r\n              {/* <MapApp /> */}\r\n            </div>\r\n          </Content>\r\n        </Layout>\r\n      </Layout>\r\n    </ContextProvider>\r\n\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}